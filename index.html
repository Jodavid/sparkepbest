<!DOCTYPE html>
<html lang="en"><head>
<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/tabby.min.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.40">

  <meta name="author" content="Prof.&nbsp;Dr.&nbsp;Jodavid Ferreira">
  <title>Explorando R e Python com Spark no contexto da Estatística</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/theme/quarto-bbe7401fe57d4b791b917637bb662036.css">
  <link rel="stylesheet" href="css/jodavid.css">
  <link href="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="images/ml_background.png" data-background-opacity="0.2" data-background-size="contain" class="quarto-title-block center">
  <h1 class="title">Explorando R e Python com Spark no contexto da Estatística</h1>
  <p class="subtitle">Dia 01 - 27.10.2025</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Prof.&nbsp;Dr.&nbsp;Jodavid Ferreira 
</div>
        <p class="quarto-title-affiliation">
            UFPE
          </p>
    </div>
</div>

</section>
<section id="estrutura-do-minicurso" class="slide level2">
<h2>Estrutura do Minicurso</h2>
<hr>
<p><br></p>
<p><strong>=&gt; Dia 01 - 27.01.2025</strong>:</p>
<ul>
<li>Introdução ao R;</li>
<li>Introdução ao python;</li>
<li>O que é Spark e instalação do Spark com Google Colab;</li>
</ul>
<p><br></p>
<p><strong>=&gt; Dia 02 - 28.01.2025:</strong></p>
<ul>
<li>Análise Exploratória de Dados com PySpark;</li>
<li>Análise Exploratória de Dados com Sparklyr;</li>
<li>Aplicando FPGroup em PySpark com criação de funções;</li>
<li>Aplicando FPGroup em Sparklyr com criação de funções;</li>
</ul>
</section>
<section class="slide level2">

<p><br> <br> <br> <br> <br></p>
<hr>
<h1 style="text-align:center;">
Introdução ao python
</h1>
<hr>
</section>
<section id="r" class="slide level2">
<h2>R</h2>
<hr>
<div class="contrib">
<p>O R é uma linguagem de programação inicialmente desenvolvida para computação estatística. E licenciada como <em>Software Livre.</em></p>
</div>
<div class="fragment">
<p><br></p>
<ul>
<li>Atualmente, é uma linguagem de programação muito utilizada em estatística e ciência de dados, e é uma das linguagens mais populares para análise de dados.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>É uma implementação de código aberto do S, que é uma linguagem de programação estatística desenvolvida pela AT&amp;T Bell Laboratories.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>As vantagens do R para programação estatística são a facilidade de uso, a capacidade de criar gráficos de alta qualidade e a comunidade de usuários ativos.</li>
</ul>
</div>
</section>
<section id="linguagem-r" class="slide level2">
<h2>Linguagem R</h2>
<hr>
<p><br></p>
<ul>
<li><p>Para obter o R, acesse o link: <a href="https://cloud.r-project.org/">https://cloud.r-project.org/</a></p></li>
<li><p>O CRAN (Comprehensive R Archive Network) é um conjunto de servidores-espelho distribuídos pelo mundo e é utilizado para distribuir o R e os pacotes do R.</p></li>
</ul>
<div class="fragment">
<ul>
<li><p>Uma <em>nova grande</em> versão do R é lançada uma vez por ano, e há dois ou três pequenos lançamentos por ano.</p></li>
<li><p>É interessante manter o R sempre atualizado, pois as novas versões do R trazem melhorias de desempenho em relação aos hardware mais recentes, novas funcionalidades e correções de bugs. tware para o R.</p></li>
</ul>
<blockquote>
<p>No momento que essa aula foi criada, o R encontrava-se na versão 4.5.1.</p>
</blockquote>
</div>
</section>
<section id="pacotes" class="slide level2">
<h2>Pacotes</h2>
<hr>
<p><br></p>
<ul>
<li>Para carregar um pacote no R, utilizamos uma das seguintes funções:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a><span class="co"># Exemplo de importação de pacotes</span></span>
<span id="cb1-2"><a href=""></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>ou</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href=""></a><span class="co"># Exemplo de importação de pacotes</span></span>
<span id="cb2-2"><a href=""></a><span class="fu">require</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>e as funções do pacote podem ser usadas de duas formas:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href=""></a><span class="co"># Exemplo de utilização de função de pacote</span></span>
<span id="cb3-2"><a href=""></a>iris <span class="sc">|&gt;</span></span>
<span id="cb3-3"><a href=""></a>  <span class="fu">filter</span>(Species <span class="sc">==</span> <span class="st">"setosa"</span>) <span class="sc">|&gt;</span></span>
<span id="cb3-4"><a href=""></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa</code></pre>
</div>
</div>
</div>
</section>
<section id="pacotes-1" class="slide level2">
<h2>Pacotes</h2>
<hr>
<p>ou</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href=""></a><span class="co"># Exemplo de utilização de função de pacote</span></span>
<span id="cb5-2"><a href=""></a>datasets<span class="sc">::</span>iris <span class="sc">|&gt;</span></span>
<span id="cb5-3"><a href=""></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(Species <span class="sc">==</span> <span class="st">"setosa"</span>) <span class="sc">|&gt;</span></span>
<span id="cb5-4"><a href=""></a>  utils<span class="sc">::</span><span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa</code></pre>
</div>
</div>
<div class="fragment">
<p>vou colocar aqui abaixo novamente…</p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href=""></a><span class="co"># Exemplo de utilização de função de pacote</span></span>
<span id="cb7-2"><a href=""></a>iris <span class="sc">|&gt;</span></span>
<span id="cb7-3"><a href=""></a>  <span class="fu">filter</span>(Species <span class="sc">==</span> <span class="st">"setosa"</span>) <span class="sc">|&gt;</span></span>
<span id="cb7-4"><a href=""></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa</code></pre>
</div>
</div>
</div>
</section>
<section id="operações-básicas" class="slide level2">
<h2>Operações Básicas</h2>
<hr>
<p><br></p>
<ul>
<li>O R é uma linguagem de programação que suporta operações aritméticas básicas, como adição, subtração, multiplicação e divisão.</li>
</ul>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href=""></a><span class="co"># Exemplo de operações aritméticas</span></span>
<span id="cb9-2"><a href=""></a><span class="dv">1</span> <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href=""></a><span class="dv">8</span> <span class="sc">-</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href=""></a><span class="dv">10</span> <span class="sc">*</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 20</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href=""></a><span class="dv">35</span> <span class="sc">/</span> <span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
</div>
</div>
</section>
<section id="criação-de-objetos" class="slide level2">
<h2>Criação de Objetos</h2>
<hr>
<p><br></p>
<ul>
<li>No R, é possível criar objetos para armazenar valores, e esses objetos podem ser de diferentes tipos, como números, strings, vetores, matrizes, data frames, entre outros.</li>
</ul>
<div class="fragment">
<ul>
<li>Criamos novos objetos utilizando o oprador de atribuição <code>&lt;-</code> ou <code>=</code>, estes podem ser utilizados da seguinte forma:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href=""></a><span class="co"># Exemplo de criação de objetos</span></span>
<span id="cb17-2"><a href=""></a>x <span class="ot">&lt;-</span> <span class="dv">42</span><span class="sc">/</span><span class="dv">2</span></span>
<span id="cb17-3"><a href=""></a>y <span class="ot">=</span> <span class="dv">47</span></span>
<span id="cb17-4"><a href=""></a><span class="dv">1</span><span class="sc">+</span><span class="dv">1</span> <span class="ot">-&gt;</span> z</span>
<span id="cb17-5"><a href=""></a><span class="fu">print</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 21</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href=""></a><span class="fu">print</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 47</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href=""></a><span class="fu">print</span>(z)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
</div>
</section>
<section id="utilização-de-funções" class="slide level2">
<h2>Utilização de Funções</h2>
<hr>
<p><br></p>
<ul>
<li>O R possui uma série de funções embutidas que podem ser utilizadas para realizar operações matemáticas, estatísticas, de manipulação de dados, entre outras, estas função são utilizadas da seguinte forma:</li>
</ul>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href=""></a><span class="co"># Exemplo de utilização de funções</span></span>
<span id="cb23-2"><a href=""></a><span class="fu">sqrt</span>(<span class="dv">16</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href=""></a><span class="fu">log</span>(<span class="fl">2.71828</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.9999993</code></pre>
</div>
</div>
</div>
<div class="fragment">
<ul>
<li>Além disso, é possível criar funções personalizadas no R, e estas funções podem ser utilizadas da seguinte forma:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href=""></a><span class="co"># Exemplo de criação de funções</span></span>
<span id="cb27-2"><a href=""></a>quadrado <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb27-3"><a href=""></a>  <span class="fu">return</span>(x<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb27-4"><a href=""></a>}</span>
<span id="cb27-5"><a href=""></a></span>
<span id="cb27-6"><a href=""></a>saida <span class="ot">&lt;-</span> <span class="fu">quadrado</span>(<span class="dv">5</span>)</span>
<span id="cb27-7"><a href=""></a><span class="fu">print</span>(saida)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 25</code></pre>
</div>
</div>
</div>
</section>
<section id="vetores-arrays-listas-e-matrizes" class="slide level2">
<h2>vetores, arrays, listas e matrizes</h2>
<hr>
<ul>
<li>No R, é possível criar vetores, arrays e listas, que são estruturas de dados que podem armazenar múltiplos valores.</li>
</ul>
<div class="fragment">
<ul>
<li>Um vetor é uma sequência de valores de um único tipo, e é criado utilizando a função <code>c()</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href=""></a><span class="co"># Exemplo de criação de vetores</span></span>
<span id="cb29-2"><a href=""></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb29-3"><a href=""></a></span>
<span id="cb29-4"><a href=""></a><span class="fu">print</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
</div>
</div>
<div class="fragment">
<ul>
<li>Um array é uma estrutura de dados que pode armazenar múltiplos valores de diferentes tipos, e é criado utilizando a função <code>array()</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href=""></a><span class="co"># Exemplo de criação de arrays</span></span>
<span id="cb31-2"><a href=""></a>y <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="st">"a"</span>, <span class="cn">TRUE</span>), <span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>))</span>
<span id="cb31-3"><a href=""></a></span>
<span id="cb31-4"><a href=""></a><span class="fu">print</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1]  
[1,] "1"   
[2,] "a"   
[3,] "TRUE"</code></pre>
</div>
</div>
</div>
</section>
<section id="vetores-arrays-listas-e-matrizes-1" class="slide level2">
<h2>vetores, arrays, listas e matrizes</h2>
<hr>
<ul>
<li>Uma lista é uma estrutura de dados que pode armazenar múltiplos valores de diferentes tipos, e é criado utilizando a função <code>list()</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href=""></a><span class="co"># Exemplo de criação de listas</span></span>
<span id="cb33-2"><a href=""></a>z <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="st">"a"</span>, <span class="cn">TRUE</span>)</span>
<span id="cb33-3"><a href=""></a></span>
<span id="cb33-4"><a href=""></a><span class="fu">print</span>(z)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] 1

[[2]]
[1] "a"

[[3]]
[1] TRUE</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li>Também temos o conceito de Matrizes, que são vetores com dimensões, ou seja, são vetores que possuem linhas e colunas, e são criadas utilizando a função <code>matrix()</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href=""></a><span class="co"># Exemplo de criação de matrizes</span></span>
<span id="cb35-2"><a href=""></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>), <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb35-3"><a href=""></a></span>
<span id="cb35-4"><a href=""></a><span class="fu">print</span>(m)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6</code></pre>
</div>
</div>
</div>
</section>
<section id="vetores-arrays-listas-e-matrizes-2" class="slide level2">
<h2>vetores, arrays, listas e matrizes</h2>
<hr>
<ul>
<li>Para acessar os elementos de estruturas como um vetor, array, lista ou matriz, utilizamos colchetes <code>[]</code>.</li>
</ul>
<div class="fragment">
<blockquote>
<p>Vale uma observação, de que os índices em R começam em 1, e não em 0, como em algumas outras linguagens de programação.</p>
</blockquote>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href=""></a><span class="co"># Exemplo de acesso a elementos de vetores</span></span>
<span id="cb37-2"><a href=""></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb37-3"><a href=""></a></span>
<span id="cb37-4"><a href=""></a><span class="fu">print</span>(x[<span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href=""></a><span class="fu">print</span>(x[<span class="dv">3</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href=""></a><span class="co"># Exemplo de acesso a elementos de matrizes</span></span>
<span id="cb41-2"><a href=""></a>m <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>), <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb41-3"><a href=""></a></span>
<span id="cb41-4"><a href=""></a><span class="fu">print</span>(m[<span class="dv">1</span>, <span class="dv">2</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href=""></a><span class="fu">print</span>(m[<span class="dv">2</span>, <span class="dv">3</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
</div>
</div>
</section>
<section id="vetores-arrays-listas-e-matrizes-3" class="slide level2">
<h2>vetores, arrays, listas e matrizes</h2>
<hr>
<div style="text-align: center;">
<p><img data-src="images/1691441547592.png" class="relative" style="width:100.0%"></p>
<p>Fonte: https://www.linkedin.com/pulse/trabalhando-com-objetos-r-vetores-matrizes-data-frames-luz-lopes/</p>
</div>
</section>
<section id="manipulação-de-dados-com-dplyr" class="slide level2">
<h2>Manipulação de dados com dplyr</h2>
<hr>
<ul>
<li>O pacote <code>dplyr</code> é um pacote do R que fornece uma gramática para manipulação de dados, e é muito útil para transformar, filtrar e resumir dados.</li>
</ul>
<div class="fragment">
<ul>
<li>O <code>dplyr</code> fornece um conjunto de funções que são fáceis de usar e que permitem realizar operações comuns de manipulação de dados de forma eficiente, dessa forma, para essa parte inicial de tratamento de dados, vamos focar na utilização desse pacote.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Vamos tentar sempre utilizar as funções da seguinte forma <code>pacote::funcao()</code> para evitar conflitos de funções com o mesmo nome em diferentes pacotes.</li>
</ul>
</div>
</section>
<section id="manipulação-de-dados-com-dplyr-1" class="slide level2">
<h2>Manipulação de dados com dplyr</h2>
<hr>
<ul>
<li>Vamos selecionar uma base de dados para utilizar as funções do <code>dplyr</code>:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href=""></a>dados <span class="ot">&lt;-</span> nycflights13<span class="sc">::</span>flights</span>
<span id="cb45-2"><a href=""></a></span>
<span id="cb45-3"><a href=""></a>dados <span class="sc">|&gt;</span> </span>
<span id="cb45-4"><a href=""></a>  <span class="fu">head</span>(<span class="dv">13</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 13 × 19
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013     1     1      517            515         2      830            819
 2  2013     1     1      533            529         4      850            830
 3  2013     1     1      542            540         2      923            850
 4  2013     1     1      544            545        -1     1004           1022
 5  2013     1     1      554            600        -6      812            837
 6  2013     1     1      554            558        -4      740            728
 7  2013     1     1      555            600        -5      913            854
 8  2013     1     1      557            600        -3      709            723
 9  2013     1     1      557            600        -3      838            846
10  2013     1     1      558            600        -2      753            745
11  2013     1     1      558            600        -2      849            851
12  2013     1     1      558            600        -2      853            856
13  2013     1     1      558            600        -2      924            917
# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
</section>
<section id="manipulação-de-dados-com-dplyr-2" class="slide level2">
<h2>Manipulação de dados com dplyr</h2>
<hr>
<p>Conseguimos fazer filtragem de dados utilizando a função <code>filter()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href=""></a>dados <span class="sc">|&gt;</span> </span>
<span id="cb47-2"><a href=""></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(month <span class="sc">==</span> <span class="dv">11</span>, day <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb47-3"><a href=""></a>  <span class="fu">head</span>(<span class="dv">13</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 13 × 19
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013    11     1        5           2359         6      352            345
 2  2013    11     1       35           2250       105      123           2356
 3  2013    11     1      455            500        -5      641            651
 4  2013    11     1      539            545        -6      856            827
 5  2013    11     1      542            545        -3      831            855
 6  2013    11     1      549            600       -11      912            923
 7  2013    11     1      550            600       -10      705            659
 8  2013    11     1      554            600        -6      659            701
 9  2013    11     1      554            600        -6      826            827
10  2013    11     1      554            600        -6      749            751
11  2013    11     1      555            600        -5      847            854
12  2013    11     1      555            600        -5      839            846
13  2013    11     1      555            600        -5      929            943
# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
</section>
<section id="manipulação-de-dados-com-dplyr-3" class="slide level2">
<h2>Manipulação de dados com dplyr</h2>
<hr>
<p>Para usar filtragens de forma eficaz, você precisa saber como utilizar operadores de comparação e operadores lógicos.</p>
<div class="fragment">
<p>Alguns operadores são:</p>
<ul>
<li>Operadores de comparação:
<ul>
<li><code>==</code> igual a</li>
<li><code>!=</code> diferente de</li>
<li><code>&gt;</code> maior que</li>
<li><code>&lt;</code> menor que</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<p><img data-src="images/operadores_logicos.jpg" class="absolute" style="margin: -300px 0 0 500px;"></p>
<ul>
<li>Operadores lógicos:
<ul>
<li><code>&amp;</code> e</li>
<li><code>|</code> ou</li>
<li><code>!</code> não</li>
</ul></li>
</ul>
</div>
</section>
<section id="manipulação-de-dados-com-dplyr-4" class="slide level2">
<h2>Manipulação de dados com dplyr</h2>
<hr>
<ul>
<li>Neste caso, podemos utilizar</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href=""></a>dados <span class="sc">|&gt;</span> </span>
<span id="cb49-2"><a href=""></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(month <span class="sc">==</span> <span class="dv">11</span> <span class="sc">&amp;</span> day <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb49-3"><a href=""></a>  <span class="fu">head</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 19
   year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
  &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
1  2013    11     1        5           2359         6      352            345
2  2013    11     1       35           2250       105      123           2356
3  2013    11     1      455            500        -5      641            651
4  2013    11     1      539            545        -6      856            827
5  2013    11     1      542            545        -3      831            855
# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href=""></a>dados <span class="sc">|&gt;</span> </span>
<span id="cb51-2"><a href=""></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span>(month <span class="sc">!=</span> <span class="dv">11</span> <span class="sc">|</span> day <span class="sc">!=</span> <span class="dv">1</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb51-3"><a href=""></a>  <span class="fu">head</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 19
   year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
  &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
1  2013    11     1        5           2359         6      352            345
2  2013    11     1       35           2250       105      123           2356
3  2013    11     1      455            500        -5      641            651
4  2013    11     1      539            545        -6      856            827
5  2013    11     1      542            545        -3      831            855
# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="manipulação-de-dados-com-dplyr-5" class="slide level2">
<h2>Manipulação de dados com dplyr</h2>
<hr>
<ul>
<li>Um problema que pode surgir para complicar as comparações, são os valores faltantes.</li>
<li>Os <em>NAs</em> (“not available”, em português, “não disponível”) são valores que não existem na base de dados.</li>
<li>Qualquer operação envolvendo um valor desconhecido, também será desconhecida.</li>
</ul>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href=""></a><span class="cn">NA</span> <span class="sc">&gt;</span> <span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href=""></a><span class="dv">10</span> <span class="sc">==</span> <span class="cn">NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href=""></a><span class="cn">NA</span> <span class="sc">+</span> <span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href=""></a><span class="cn">NA</span> <span class="sc">==</span> <span class="cn">NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
</div>
<div class="fragment">
<ul>
<li>Para verificar se um valor é faltante, pode utilizar a função <code>is.na()</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href=""></a><span class="fu">is.na</span>(<span class="cn">NA</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href=""></a><span class="fu">is.na</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</div>
</section>
<section id="manipulação-de-dados-com-dplyr-6" class="slide level2">
<h2>Manipulação de dados com dplyr</h2>
<hr>
<ul>
<li>A função <code>filter()</code> só considera as linhas em que a condição é verdadeira (<code>TRUE</code>), e descarta as linhas em que a condição é falsa (<code>FALSE</code>) ou <code>NA</code>. Se deseja preservar os valores faltantes, peça eles explicitamente:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href=""></a>dados <span class="sc">|&gt;</span> </span>
<span id="cb65-2"><a href=""></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">is.na</span>(dep_time)) <span class="sc">|&gt;</span> </span>
<span id="cb65-3"><a href=""></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 19
    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
 1  2013     1     1       NA           1630        NA       NA           1815
 2  2013     1     1       NA           1935        NA       NA           2240
 3  2013     1     1       NA           1500        NA       NA           1825
 4  2013     1     1       NA            600        NA       NA            901
 5  2013     1     2       NA           1540        NA       NA           1747
 6  2013     1     2       NA           1620        NA       NA           1746
 7  2013     1     2       NA           1355        NA       NA           1459
 8  2013     1     2       NA           1420        NA       NA           1644
 9  2013     1     2       NA           1321        NA       NA           1536
10  2013     1     2       NA           1545        NA       NA           1910
# ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
</section>
<section id="manipulação-de-dados-com-dplyr-7" class="slide level2">
<h2>Manipulação de dados com dplyr</h2>
<hr>
<ul>
<li>A função <code>select()</code> é utilizada para selecionar colunas de um data frame.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href=""></a>dados <span class="sc">|&gt;</span> </span>
<span id="cb67-2"><a href=""></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(year, month, day) <span class="sc">|&gt;</span> </span>
<span id="cb67-3"><a href=""></a>  <span class="fu">head</span>(<span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 3
    year month   day
   &lt;int&gt; &lt;int&gt; &lt;int&gt;
 1  2013     1     1
 2  2013     1     1
 3  2013     1     1
 4  2013     1     1
 5  2013     1     1
 6  2013     1     1
 7  2013     1     1
 8  2013     1     1
 9  2013     1     1
10  2013     1     1
11  2013     1     1
12  2013     1     1
13  2013     1     1
14  2013     1     1
15  2013     1     1</code></pre>
</div>
</div>
</section>
<section id="manipulação-de-dados-com-dplyr-8" class="slide level2">
<h2>Manipulação de dados com dplyr</h2>
<hr>
<ul>
<li>É possível excluir colunas também utilizando o <code>select()</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href=""></a>dados <span class="sc">|&gt;</span> </span>
<span id="cb69-2"><a href=""></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>year, <span class="sc">-</span>month, <span class="sc">-</span>day) <span class="sc">|&gt;</span> </span>
<span id="cb69-3"><a href=""></a>  <span class="fu">head</span>(<span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 16
   dep_time sched_dep_time dep_delay arr_time sched_arr_time arr_delay carrier
      &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;  
 1      517            515         2      830            819        11 UA     
 2      533            529         4      850            830        20 UA     
 3      542            540         2      923            850        33 AA     
 4      544            545        -1     1004           1022       -18 B6     
 5      554            600        -6      812            837       -25 DL     
 6      554            558        -4      740            728        12 UA     
 7      555            600        -5      913            854        19 B6     
 8      557            600        -3      709            723       -14 EV     
 9      557            600        -3      838            846        -8 B6     
10      558            600        -2      753            745         8 AA     
11      558            600        -2      849            851        -2 B6     
12      558            600        -2      853            856        -3 B6     
13      558            600        -2      924            917         7 UA     
14      558            600        -2      923            937       -14 UA     
15      559            600        -1      941            910        31 AA     
# ℹ 9 more variables: flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;,
#   air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
</section>
<section id="manipulação-de-dados-com-dplyr-9" class="slide level2">
<h2>Manipulação de dados com dplyr</h2>
<hr>
<ul>
<li>Existe também a função <code>summarise()</code>, que é utilizada para resumir os dados.</li>
<li>A função <code>summarise()</code> é muito útil para resumir os dados e obter estatísticas descritivas.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href=""></a>dados <span class="sc">|&gt;</span> </span>
<span id="cb71-2"><a href=""></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">mean_distance =</span> <span class="fu">mean</span>(distance), </span>
<span id="cb71-3"><a href=""></a>                   <span class="at">mean_air_time =</span> <span class="fu">mean</span>(air_time)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  mean_distance mean_air_time
          &lt;dbl&gt;         &lt;dbl&gt;
1         1040.            NA</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li>Observe que para a variável <code>air_time</code> o resultado foi <code>NA</code>, isso ocorreu porque a função <code>mean()</code> não sabe o que fazer com valores faltantes. Nesse caso, devemos passar como argumento para remover os valores faltantes.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href=""></a>dados <span class="sc">|&gt;</span> </span>
<span id="cb73-2"><a href=""></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">mean_distance =</span> <span class="fu">mean</span>(distance), </span>
<span id="cb73-3"><a href=""></a>                   <span class="at">mean_air_time =</span> <span class="fu">mean</span>(air_time, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  mean_distance mean_air_time
          &lt;dbl&gt;         &lt;dbl&gt;
1         1040.          151.</code></pre>
</div>
</div>
</div>
</section>
<section id="manipulação-de-dados-com-dplyr-10" class="slide level2">
<h2>Manipulação de dados com dplyr</h2>
<hr>
<ul>
<li>A função <code>group_by()</code> é utilizada para agrupar os dados por uma ou mais variáveis.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href=""></a>dados <span class="sc">|&gt;</span> </span>
<span id="cb75-2"><a href=""></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(month) <span class="sc">|&gt;</span> </span>
<span id="cb75-3"><a href=""></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">mean_distance =</span> <span class="fu">mean</span>(distance), </span>
<span id="cb75-4"><a href=""></a>                   <span class="at">mean_air_time =</span> <span class="fu">mean</span>(air_time, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 3
   month mean_distance mean_air_time
   &lt;int&gt;         &lt;dbl&gt;         &lt;dbl&gt;
 1     1         1007.          154.
 2     2         1001.          151.
 3     3         1012.          149.
 4     4         1039.          153.
 5     5         1041.          146.
 6     6         1057.          150.
 7     7         1059.          147.
 8     8         1062.          148.
 9     9         1041.          143.
10    10         1039.          149.
11    11         1050.          155.
12    12         1065.          163.</code></pre>
</div>
</div>
</section>
<section id="manipulação-de-dados-com-dplyr-11" class="slide level2">
<h2>Manipulação de dados com dplyr</h2>
<hr>
<ul>
<li>Contagens também é uma operação muito comum, e para isso, utilizamos a função <code>n()</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href=""></a>dados <span class="sc">|&gt;</span> </span>
<span id="cb77-2"><a href=""></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(month) <span class="sc">|&gt;</span> </span>
<span id="cb77-3"><a href=""></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 2
   month     n
   &lt;int&gt; &lt;int&gt;
 1     1 27004
 2     2 24951
 3     3 28834
 4     4 28330
 5     5 28796
 6     6 28243
 7     7 29425
 8     8 29327
 9     9 27574
10    10 28889
11    11 27268
12    12 28135</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<p><br> <br> <br> <br> <br></p>
<hr>
<h1 style="text-align:center;">
Introdução ao python
</h1>
<hr>
</section>
<section id="módulos-ou-bibliotecas" class="slide level2">
<h2>Módulos ou bibliotecas</h2>
<hr>
<ul>
<li>As instalações de bibliotecas em python são realizadas utilizando o comando pip, ou seja, utilizamos o comando <code>pip install nome_da_biblioteca</code>.</li>
</ul>
<p>Por exemplo, para instalar a biblioteca pandas, utilizamos o comando:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href=""></a>pip install pandas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>E podemos verificar se a instalação foi bem sucessida, utilizando:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb80-1"><a href=""></a><span class="ex">pip</span> show pandas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Name: pandas
Version: 2.1.4
Summary: Powerful data structures for data analysis, time series, and statistics
Home-page: https://pandas.pydata.org
Author: 
Author-email: The Pandas Development Team &lt;pandas-dev@python.org&gt;
License: BSD 3-Clause License

Copyright (c) 2008-2011, AQR Capital Management, LLC, Lambda Foundry, Inc. and PyData Development Team
All rights reserved.

Copyright (c) 2011-2023, Open source contributors.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

* Redistributions of source code must retain the above copyright notice, this
  list of conditions and the following disclaimer.

* Redistributions in binary form must reproduce the above copyright notice,
  this list of conditions and the following disclaimer in the documentation
  and/or other materials provided with the distribution.

* Neither the name of the copyright holder nor the names of its
  contributors may be used to endorse or promote products derived from
  this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
Location: /home/jodavid/anaconda3/lib/python3.11/site-packages
Requires: numpy, python-dateutil, pytz, tzdata
Required-by: altair, category-encoders, datasets, datashader, gradio, holoviews, hvplot, mizani, panel, plotly-resampler, plotnine, pmdarima, pycaret, pymilvus, satveg-api, seaborn, sktime, statsmodels, streamlit, sweetviz, TTS, xarray</code></pre>
</div>
</div>
</section>
<section id="módulos" class="slide level2">
<h2>Módulos</h2>
<hr>
<ul>
<li><p>Também conhecidos como bibliotecas, os módulos são arquivos que contém funções, variáveis e classes que podem ser utilizadas em outros programas.</p></li>
<li><p>Para utilizar um módulo em python, utilizamos o comando <code>import nome_do_modulo</code>. Caso deseje utilizar apenas uma função específica de um módulo, utilizamos o comando <code>from nome_do_modulo import nome_da_funcao</code>.</p></li>
<li><p>Como por exemplo, utilizando o modulo <code>math</code>:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb82-1"><a href=""></a><span class="co"># Exemplo de importação de módulo</span></span>
<span id="cb82-2"><a href=""></a><span class="im">import</span> math</span>
<span id="cb82-3"><a href=""></a>math.sqrt(<span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>5.0</code></pre>
</div>
</div>
<p>Acima o <code>math</code> é o módulo e <code>sqrt</code> é a função que calcula a raiz quadrada de um número.</p>
</section>
<section id="módulos-1" class="slide level2">
<h2>Módulos</h2>
<hr>
<ul>
<li>Em python é comum utilizarmos a abreviação de um módulo, para facilitar a utilização de suas funções. Por exemplo, o módulo <code>pandas</code> é comumente abreviado como <code>pd</code>, o módulo <code>numpy</code> é abreviado como <code>np</code>, o módulo <code>matplotlib</code> é abreviado como <code>plt</code>, entre outros.</li>
</ul>
<blockquote>
<p>Vale uma observação é que essas abreviações elas são abraçadas pela comunidade, ou seja, não é uma regra, mas existe uma boa prática de por exemplo, abreviar o pandas como pd, o numpy como np, o matplotlib como plt, e existe isso para várias outras bibliotecas.</p>
</blockquote>
</section>
<section id="módulos-2" class="slide level2">
<h2>Módulos</h2>
<hr>
<p>Também existe o caso de você explicitar as funções que desejas nos módulos, com o intuito de usar diretamente o nome da função, sem a necessidade de chamar o módulo. Por exemplo, ao invés de utilizar <code>math.sqrt(25)</code>, você pode utilizar <code>from math import sqrt</code> e depois utilizar <code>sqrt(25)</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb84-1"><a href=""></a><span class="co"># Exemplo de importação de função</span></span>
<span id="cb84-2"><a href=""></a><span class="im">from</span> math <span class="im">import</span> sqrt</span>
<span id="cb84-3"><a href=""></a>sqrt(<span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>5.0</code></pre>
</div>
</div>
<blockquote>
<p>Note que a função <code>sqrt</code> foi importada diretamente do módulo <code>math</code>, e por isso não é necessário chamar o módulo para utilizá-la, ou seja, se a função não for utilizada como na forma acima, e utilizar o <code>import math</code> é necessário utilizar o <code>math.sqrt(25)</code> para obter o resultado, informando que a função <code>sqrt</code> pertence ao módulo <code>math</code>.</p>
</blockquote>
</section>
<section id="módulos-3" class="slide level2">
<h2>Módulos</h2>
<hr>
<ul>
<li>O python também permite que você utilize um apelido para a função importada, por exemplo, ao invés de utilizar <code>from math import sqrt</code>, você pode utilizar <code>from math import sqrt as raiz_quadrada</code>, e depois utilizar <code>raiz_quadrada(25)</code> para obter o resultado. Isso é útil quando a função importada possui um nome muito grande, ou quando o nome da função importada é muito comum e pode gerar confusão com outras funções. Então, um exemplo para esse caso é:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb86-1"><a href=""></a><span class="co"># Exemplo de importação de função com apelido</span></span>
<span id="cb86-2"><a href=""></a><span class="im">from</span> math <span class="im">import</span> sqrt <span class="im">as</span> raiz_quadrada</span>
<span id="cb86-3"><a href=""></a>raiz_quadrada(<span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>5.0</code></pre>
</div>
</div>
</section>
<section id="laços-e-condicionais" class="slide level2">
<h2>Laços e Condicionais</h2>
<hr>
<div style="text-align: center;">
<p><img data-src="images/do_for.jpeg" style="text-align: center; width: 70%; height: auto;"></p>
</div>
</section>
<section id="laços-e-condicionais-1" class="slide level2">
<h2>Laços e Condicionais</h2>
<hr>
<ul>
<li>Muitas linguagens usam chaves para delimitar blocos de código, mas em Python, a indentação é usada para isso. A indentação é uma parte importante da linguagem Python e, muitas vezes, é uma fonte de erros para os programadores que estão começando a aprender a linguagem.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb88-1"><a href=""></a><span class="co"># Exemplo de condicional</span></span>
<span id="cb88-2"><a href=""></a>x <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb88-3"><a href=""></a><span class="cf">if</span> x <span class="op">&gt;</span> <span class="dv">5</span>:</span>
<span id="cb88-4"><a href=""></a>    <span class="bu">print</span>(<span class="st">"x é maior que 5"</span>)</span>
<span id="cb88-5"><a href=""></a><span class="cf">else</span>:</span>
<span id="cb88-6"><a href=""></a>    <span class="bu">print</span>(<span class="st">"x é menor ou igual a 5"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>x é maior que 5</code></pre>
</div>
</div>
<ul>
<li>Como é possível observar acima, o bloco de código que está dentro do <code>if</code> e do <code>else</code> está indentado, ou seja, está com um espaço a mais em relação ao bloco de código que está fora do <code>if</code> e do <code>else</code>. Isso é necessário para que o python entenda que o bloco de código está dentro do <code>if</code> e do <code>else</code>.</li>
</ul>
</section>
<section id="laços-e-condicionais-2" class="slide level2">
<h2>Laços e Condicionais</h2>
<hr>
<p>Quando o laço é utilizando <code>for</code> e <code>while</code>, a indentação também é necessária para delimitar o bloco de código que está dentro do laço.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb90-1"><a href=""></a><span class="co"># Exemplo de laço for</span></span>
<span id="cb90-2"><a href=""></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>):</span>
<span id="cb90-3"><a href=""></a>    <span class="bu">print</span>(i)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0
1
2
3
4</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb92-1"><a href=""></a><span class="co"># Exemplo de laço while</span></span>
<span id="cb92-2"><a href=""></a>i <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb92-3"><a href=""></a><span class="cf">while</span> i <span class="op">&lt;</span> <span class="dv">5</span>:</span>
<span id="cb92-4"><a href=""></a>    <span class="bu">print</span>(i)</span>
<span id="cb92-5"><a href=""></a>    i <span class="op">+=</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote>
<p>Uma observação importante, é que diferente da linguagem <code>R</code> o python inicia sua indexação em 0, ou seja, o primeiro elemento de uma lista, por exemplo, é o elemento 0, o segundo elemento é o elemento 1, e assim por diante. No <code>R</code> a indexação inicia em 1.</p>
</blockquote>
</section>
<section id="laços-complexos" class="slide level2">
<h2>Laços Complexos</h2>
<hr>
<ul>
<li>Em python, se você possui uma lista, é possível acessar os elementos da lista diretamente da iteração no laço <code>for</code>. Isso é muito útil quando você deseja acessar o índice e o valor de um elemento da lista.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb93-1"><a href=""></a><span class="co"># Exemplo de laço for com acesso ao índice e ao valor</span></span>
<span id="cb93-2"><a href=""></a>lista <span class="op">=</span> [<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>,  <span class="dv">60</span>, <span class="dv">70</span>, <span class="dv">80</span>, <span class="dv">90</span>, <span class="dv">100</span>]</span>
<span id="cb93-3"><a href=""></a><span class="cf">for</span> i <span class="kw">in</span> lista:</span>
<span id="cb93-4"><a href=""></a>    <span class="bu">print</span>(i)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="laços-complexos-1" class="slide level2">
<h2>Laços Complexos</h2>
<hr>
<ul>
<li>Em python, se você possui uma lista, é possível acessar os elementos da lista diretamente da iteração no laço <code>for</code>. Isso é muito útil quando você deseja acessar o índice e o valor de um elemento da lista.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb94-1"><a href=""></a><span class="co"># Exemplo de laço for com acesso ao índice e ao valor</span></span>
<span id="cb94-2"><a href=""></a>lista <span class="op">=</span> [<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>,  <span class="dv">60</span>, <span class="dv">70</span>, <span class="dv">80</span>, <span class="dv">90</span>, <span class="dv">100</span>]</span>
<span id="cb94-3"><a href=""></a><span class="cf">for</span> i <span class="kw">in</span> lista:</span>
<span id="cb94-4"><a href=""></a>    <span class="bu">print</span>(i)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>10
20
30
40
50
60
70
80
90
100</code></pre>
</div>
</div>
</section>
<section id="laços-complexos-2" class="slide level2">
<h2>Laços Complexos</h2>
<hr>
<ul>
<li>Uma forma mais complexa é utilizando a função <code>enumerate</code> para acessar o índice e o valor de um elemento da lista.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb96-1"><a href=""></a><span class="co"># Exemplo de laço for com acesso ao índice e ao valor</span></span>
<span id="cb96-2"><a href=""></a>lista <span class="op">=</span> [<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>]</span>
<span id="cb96-3"><a href=""></a><span class="cf">for</span> i, valor <span class="kw">in</span> <span class="bu">enumerate</span>(lista):</span>
<span id="cb96-4"><a href=""></a>    <span class="bu">print</span>(<span class="ss">f"O elemento </span><span class="sc">{</span>i<span class="sc">}</span><span class="ss"> da lista é </span><span class="sc">{</span>valor<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>O elemento 0 da lista é 10
O elemento 1 da lista é 20
O elemento 2 da lista é 30
O elemento 3 da lista é 40
O elemento 4 da lista é 50</code></pre>
</div>
</div>
<ul>
<li>Mas vamos avançando aos poucos, e vamos ver como podemos criar funções em python.</li>
</ul>
</section>
<section id="funções" class="slide level2">
<h2>Funções</h2>
<hr>
<p>Em python, as funções são criadas utilizando a palavra-chave <code>def</code>, seguida pelo nome da função, seguida por parênteses, seguida por dois pontos. O bloco de código que está dentro da função é indentado, ou seja, está com um espaço a mais em relação ao bloco de código que está fora da função.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb98-1"><a href=""></a><span class="co"># Exemplo de função</span></span>
<span id="cb98-2"><a href=""></a><span class="kw">def</span> minha_funcao():</span>
<span id="cb98-3"><a href=""></a>    <span class="bu">print</span>(<span class="st">"Olá, mundo!"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Para chamar a função, basta utilizar o nome da função seguido por parênteses.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb99-1"><a href=""></a><span class="co"># Chamando a função</span></span>
<span id="cb99-2"><a href=""></a>minha_funcao()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Olá, mundo!</code></pre>
</div>
</div>
<p>Como boas práticas de programação, é interessante que as funções possuam argumentos e docstring, ou seja, parâmetros que são passados para a função e dentro da função um cabeçalho indicando o que cada argumento representa, respectivamente. Isso torna a função mais flexível e mais útil.</p>
</section>
<section id="funções-1" class="slide level2">
<h2>Funções</h2>
<hr>
<p>Um exemplo de função com argumentos e docstring é:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb101-1"><a href=""></a><span class="co"># Exemplo de função com argumentos e docstring</span></span>
<span id="cb101-2"><a href=""></a><span class="kw">def</span> saudacao(nome, saudacao<span class="op">=</span><span class="st">"Olá"</span>):</span>
<span id="cb101-3"><a href=""></a>    <span class="co">"""</span></span>
<span id="cb101-4"><a href=""></a><span class="co">    Função para saudar alguém</span></span>
<span id="cb101-5"><a href=""></a><span class="co">    Argumentos:</span></span>
<span id="cb101-6"><a href=""></a><span class="co">    nome: str, nome da pessoa a ser saudada</span></span>
<span id="cb101-7"><a href=""></a><span class="co">    saudacao: str, saudação a ser utilizada</span></span>
<span id="cb101-8"><a href=""></a><span class="co">    """</span></span>
<span id="cb101-9"><a href=""></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>saudacao<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>nome<span class="sc">}</span><span class="ss">!"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>No exemplo acima, a função <code>saudacao</code> possui dois argumentos, <code>nome</code> e <code>saudacao</code>, onde <code>nome</code> é obrigatório e <code>saudacao</code> é opcional, pois possui um valor padrão. Além disso, a função possui um cabeçalho que indica o que cada argumento representa.</p>
</section>
<section id="strings" class="slide level2">
<h2>Strings</h2>
<hr>
<p>As strings podem ser demilitadas por aspas simples ou duplas, e podem ser acessadas como listas, ou seja, é possível acessar cada caractere da string utilizando a indexação.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb102-1"><a href=""></a><span class="co"># Exemplo de string</span></span>
<span id="cb102-2"><a href=""></a>single_quoted_string <span class="op">=</span> <span class="st">'data science'</span></span>
<span id="cb102-3"><a href=""></a>double_quoted_string <span class="op">=</span> <span class="st">"data science"</span></span>
<span id="cb102-4"><a href=""></a>single_quoted_string <span class="op">==</span> double_quoted_string</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>True</code></pre>
</div>
</div>
<p>O python usa barra invertida para codificar caracteres especiais. Por exemplo, para incluir uma aspa simples em uma string delimitada por aspas simples, você deve usar <code>\'</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb104-1"><a href=""></a><span class="co"># Exemplo de string com aspas simples</span></span>
<span id="cb104-2"><a href=""></a>tab_string <span class="op">=</span> <span class="st">"</span><span class="ch">\t</span><span class="st">"</span> <span class="co"># representa o caractere de tabulação</span></span>
<span id="cb104-3"><a href=""></a><span class="bu">len</span>(tab_string)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1</code></pre>
</div>
</div>
</section>
<section id="strings-1" class="slide level2">
<h2>Strings</h2>
<hr>
<p>Também é possível criar strings múltiplas linhas utilizando três aspas simples ou duplas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb106-1"><a href=""></a><span class="co"># Exemplo de string com múltiplas linhas</span></span>
<span id="cb106-2"><a href=""></a>multi_line_string <span class="op">=</span> <span class="st">"""Esta é a primeira linha.</span></span>
<span id="cb106-3"><a href=""></a><span class="st">e esta é a segunda linha</span></span>
<span id="cb106-4"><a href=""></a><span class="st">e esta é a terceira linha"""</span></span>
<span id="cb106-5"><a href=""></a><span class="bu">print</span>(multi_line_string)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Esta é a primeira linha.
e esta é a segunda linha
e esta é a terceira linha</code></pre>
</div>
</div>
<p>O python também possui uma série de funções para manipular strings, como por exemplo, a função <code>split</code> que divide uma string em uma lista de substrings.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb108-1"><a href=""></a><span class="co"># Exemplo de função split</span></span>
<span id="cb108-2"><a href=""></a>s <span class="op">=</span> <span class="st">"Olá, mundo!"</span></span>
<span id="cb108-3"><a href=""></a>s.split()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['Olá,', 'mundo!']</code></pre>
</div>
</div>
</section>
<section id="listas" class="slide level2">
<h2>Listas</h2>
<hr>
<p>As listas são uma das estruturas de dados mais importantes do python. Elas são similares aos <strong>vetores</strong> em outras linguagens, como por exemplo na linguagem <code>R</code>^[No <code>R</code>,tipos diferentes no vetor ele converte para <code>character</code>, por exemplo <code>vetor &lt;-c("a",1,TRUE)</code>, entretanto, são mais flexíveis. Elas são mais flexíveis, pois podem armazenar qualquer tipo de dado, e não são limitadas a um único tipo de dado.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb110-1"><a href=""></a><span class="co"># Exemplo de lista</span></span>
<span id="cb110-2"><a href=""></a>integer_list <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb110-3"><a href=""></a>heterogeneous_list <span class="op">=</span> [<span class="st">"string"</span>, <span class="fl">0.1</span>, <span class="va">True</span>]</span>
<span id="cb110-4"><a href=""></a>list_of_lists <span class="op">=</span> [integer_list, heterogeneous_list, []]</span>
<span id="cb110-5"><a href=""></a>list_length <span class="op">=</span> <span class="bu">len</span>(integer_list)</span>
<span id="cb110-6"><a href=""></a>list_sum <span class="op">=</span> <span class="bu">sum</span>(integer_list)</span>
<span id="cb110-7"><a href=""></a></span>
<span id="cb110-8"><a href=""></a><span class="bu">print</span>(integer_list)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1, 2, 3]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb112-1"><a href=""></a><span class="bu">print</span>(heterogeneous_list)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['string', 0.1, True]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb114-1"><a href=""></a><span class="bu">print</span>(list_of_lists)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1, 2, 3], ['string', 0.1, True], []]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb116-1"><a href=""></a><span class="bu">print</span>(list_length)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb118-1"><a href=""></a><span class="bu">print</span>(list_sum)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>6</code></pre>
</div>
</div>
</section>
<section id="listas-1" class="slide level2">
<h2>Listas</h2>
<hr>
<p>Você pode acessar ou modificar o <code>i-ésimo</code> elemento de uma lista utilizando colchetes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb120-1"><a href=""></a><span class="co"># Exemplo de acesso a elementos de uma lista</span></span>
<span id="cb120-2"><a href=""></a>x <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">10</span>))</span>
<span id="cb120-3"><a href=""></a>zero <span class="op">=</span> x[<span class="dv">0</span>]</span>
<span id="cb120-4"><a href=""></a>one <span class="op">=</span> x[<span class="dv">1</span>]</span>
<span id="cb120-5"><a href=""></a>nine <span class="op">=</span> x[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb120-6"><a href=""></a>eight <span class="op">=</span> x[<span class="op">-</span><span class="dv">2</span>]</span>
<span id="cb120-7"><a href=""></a>x[<span class="dv">0</span>] <span class="op">=</span> <span class="op">-</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="listas-2" class="slide level2">
<h2>Listas</h2>
<hr>
<p>Além disso, o python possui uma sintaxe de corte que permite acessar múltiplos elementos de uma lista.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb121-1"><a href=""></a><span class="co"># Exemplo de corte de lista</span></span>
<span id="cb121-2"><a href=""></a>first_three <span class="op">=</span> x[:<span class="dv">3</span>]</span>
<span id="cb121-3"><a href=""></a>three_to_end <span class="op">=</span> x[<span class="dv">3</span>:]</span>
<span id="cb121-4"><a href=""></a>one_to_four <span class="op">=</span> x[<span class="dv">1</span>:<span class="dv">5</span>]</span>
<span id="cb121-5"><a href=""></a>last_three <span class="op">=</span> x[<span class="op">-</span><span class="dv">3</span>:]</span>
<span id="cb121-6"><a href=""></a>without_first_and_last <span class="op">=</span> x[<span class="dv">1</span>:<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb121-7"><a href=""></a>copy_of_x <span class="op">=</span> x[:]</span>
<span id="cb121-8"><a href=""></a></span>
<span id="cb121-9"><a href=""></a><span class="bu">print</span>(first_three)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[-1, 1, 2]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb123-1"><a href=""></a><span class="bu">print</span>(three_to_end)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[3, 4, 5, 6, 7, 8, 9]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb125-1"><a href=""></a><span class="bu">print</span>(one_to_four)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1, 2, 3, 4]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb127-1"><a href=""></a><span class="bu">print</span>(last_three)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[7, 8, 9]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb129-1"><a href=""></a><span class="bu">print</span>(without_first_and_last)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1, 2, 3, 4, 5, 6, 7, 8]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb131-1"><a href=""></a><span class="bu">print</span>(copy_of_x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[-1, 1, 2, 3, 4, 5, 6, 7, 8, 9]</code></pre>
</div>
</div>
</section>
<section id="listas-3" class="slide level2">
<h2>Listas</h2>
<hr>
<p>Um operação interessante é utilizando o operator <code>in</code> para verificar se um elemento está contido em uma lista.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb133-1"><a href=""></a><span class="co"># Exemplo de operador in</span></span>
<span id="cb133-2"><a href=""></a><span class="dv">1</span> <span class="kw">in</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>True</code></pre>
</div>
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb135-1"><a href=""></a><span class="dv">0</span> <span class="kw">in</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>False</code></pre>
</div>
</div>
<p><strong>OBS.: Essa operação é muito mais lenta em listas do que em dicionários e conjuntos, pois o python faz uma busca linear em listas, ou seja, verifica os elementos da lista um de cadas vez, sendo assim a verificação em um conjunto ou dicionário é muito rápido. Vamos estudar consjuntos e dicionários mais a frente.</strong></p>
<p>Com listas, também podemos concatenar, ou seja, adicionar mais informações a lista, e isso pode ser feito de várias formas, como adição de elementos a lista, junção de várias listas, ou multiplicação de listas. Abaixo segue exemplos de como fazer isso.</p>
</section>
<section id="listas-4" class="slide level2">
<h2>Listas</h2>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb137-1"><a href=""></a><span class="co"># Exemplo de concatenação de listas</span></span>
<span id="cb137-2"><a href=""></a>x <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb137-3"><a href=""></a>x.extend([<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>])</span>
<span id="cb137-4"><a href=""></a><span class="bu">print</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1, 2, 3, 4, 5, 6]</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb139-1"><a href=""></a><span class="co"># Exemplo de concatenação de listas</span></span>
<span id="cb139-2"><a href=""></a>x <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb139-3"><a href=""></a>y <span class="op">=</span> x <span class="op">+</span> [<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>]</span>
<span id="cb139-4"><a href=""></a><span class="bu">print</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1, 2, 3, 4, 5, 6]</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb141-1"><a href=""></a><span class="co"># Exemplo de concatenação de elementos a lista</span></span>
<span id="cb141-2"><a href=""></a>x <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb141-3"><a href=""></a>x.append(<span class="dv">0</span>)</span>
<span id="cb141-4"><a href=""></a>y <span class="op">=</span> x[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb141-5"><a href=""></a>z <span class="op">=</span> <span class="bu">len</span>(x)</span>
<span id="cb141-6"><a href=""></a><span class="bu">print</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1, 2, 3, 0]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb143-1"><a href=""></a><span class="bu">print</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb145-1"><a href=""></a><span class="bu">print</span>(z)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>4</code></pre>
</div>
</div>
</section>
<section id="listas-5" class="slide level2">
<h2>Listas</h2>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb147-1"><a href=""></a><span class="co"># Exemplo de junção de listas</span></span>
<span id="cb147-2"><a href=""></a>x, y <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>], [<span class="dv">3</span>, <span class="dv">4</span>]</span>
<span id="cb147-3"><a href=""></a>z <span class="op">=</span> x <span class="op">+</span> y</span>
<span id="cb147-4"><a href=""></a><span class="bu">print</span>(z)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1, 2, 3, 4]</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb149-1"><a href=""></a><span class="co"># Exemplo de multiplicação de listas</span></span>
<span id="cb149-2"><a href=""></a>x <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>] <span class="op">*</span> <span class="dv">3</span></span>
<span id="cb149-3"><a href=""></a><span class="bu">print</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1, 2, 1, 2, 1, 2]</code></pre>
</div>
</div>
</section>
<section id="tuplas" class="slide level2">
<h2>Tuplas</h2>
<hr>
<p>Chegamos a Tuplas, e o que seria isso? Tuplas são muito parecidas com listas, mas com uma diferença fundamental, elas são <strong>imutáveis</strong>, ou seja, uma vez que você cria uma tupla, você não pode adicionar, remover ou modificar elementos dela. Tuplas são geralmente utilizadas para funções que retornam múltiplos valores. Vamos a exemplos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb151-1"><a href=""></a><span class="co"># Exemplo de tuplas</span></span>
<span id="cb151-2"><a href=""></a>my_list <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb151-3"><a href=""></a>my_tuple <span class="op">=</span> (<span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb151-4"><a href=""></a>other_tuple <span class="op">=</span> <span class="dv">3</span>, <span class="dv">4</span></span>
<span id="cb151-5"><a href=""></a>my_list[<span class="dv">1</span>] <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb151-6"><a href=""></a><span class="cf">try</span>:</span>
<span id="cb151-7"><a href=""></a>    my_tuple[<span class="dv">1</span>] <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb151-8"><a href=""></a><span class="cf">except</span> <span class="pp">TypeError</span>:</span>
<span id="cb151-9"><a href=""></a>    <span class="bu">print</span>(<span class="st">"Não é possível modificar uma tupla"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Não é possível modificar uma tupla</code></pre>
</div>
</div>
</section>
<section id="tuplas-1" class="slide level2">
<h2>Tuplas</h2>
<hr>
<p>Um outro exemplo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb153-1"><a href=""></a><span class="co"># Exemplo de tuplas</span></span>
<span id="cb153-2"><a href=""></a><span class="kw">def</span> sum_and_product(x, y):</span>
<span id="cb153-3"><a href=""></a>    <span class="cf">return</span> (x <span class="op">+</span> y), (x <span class="op">*</span> y)</span>
<span id="cb153-4"><a href=""></a>  </span>
<span id="cb153-5"><a href=""></a>sp <span class="op">=</span> sum_and_product(<span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb153-6"><a href=""></a>s, p <span class="op">=</span> sum_and_product(<span class="dv">5</span>, <span class="dv">10</span>)</span>
<span id="cb153-7"><a href=""></a><span class="bu">print</span>(sp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(5, 6)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb155-1"><a href=""></a><span class="bu">print</span>(s)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>15</code></pre>
</div>
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb157-1"><a href=""></a><span class="bu">print</span>(p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>50</code></pre>
</div>
</div>
<p>As tuplas (e listas) podem ser usadas para atribuições múltiplas, o que é muito útil para trocar valores de variáveis.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb159-1"><a href=""></a><span class="co"># Exemplo de atribuição múltipla</span></span>
<span id="cb159-2"><a href=""></a>x, y <span class="op">=</span> <span class="dv">1</span>, <span class="dv">2</span></span>
<span id="cb159-3"><a href=""></a>x, y <span class="op">=</span> y, x</span>
<span id="cb159-4"><a href=""></a><span class="bu">print</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb161-1"><a href=""></a><span class="bu">print</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1</code></pre>
</div>
</div>
</section>
<section id="dicionários" class="slide level2">
<h2>Dicionários</h2>
<hr>
<p>Outra estrutura fundamental é o dicionário, que é uma coleção de pares chave-valor, onde as chaves devem ser únicas. Dicionários são como <strong>listas</strong>, mas mais gerais, pois você pode indexá-los com <strong>qualquer tipo imutável</strong>, não apenas inteiros. Vamos a exemplos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb163-1"><a href=""></a><span class="co"># Exemplo de dicionários</span></span>
<span id="cb163-2"><a href=""></a>empty_dict <span class="op">=</span> {}</span>
<span id="cb163-3"><a href=""></a>empty_dict2 <span class="op">=</span> <span class="bu">dict</span>()</span>
<span id="cb163-4"><a href=""></a>grades <span class="op">=</span> {<span class="st">"Joel"</span>: <span class="dv">80</span>, <span class="st">"Tim"</span>: <span class="dv">95</span>}</span>
<span id="cb163-5"><a href=""></a>joels_grade <span class="op">=</span> grades[<span class="st">"Joel"</span>]</span>
<span id="cb163-6"><a href=""></a><span class="bu">print</span>(empty_dict)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{}</code></pre>
</div>
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb165-1"><a href=""></a><span class="bu">print</span>(empty_dict2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{}</code></pre>
</div>
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb167-1"><a href=""></a><span class="bu">print</span>(grades)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'Joel': 80, 'Tim': 95}</code></pre>
</div>
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb169-1"><a href=""></a><span class="bu">print</span>(joels_grade)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>80</code></pre>
</div>
</div>
</section>
<section id="dicionários-1" class="slide level2">
<h2>Dicionários</h2>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb171-1"><a href=""></a><span class="co"># Exemplo de operador in</span></span>
<span id="cb171-2"><a href=""></a>joel_has_grade <span class="op">=</span> <span class="st">"Joel"</span> <span class="kw">in</span> grades</span>
<span id="cb171-3"><a href=""></a>kate_has_grade <span class="op">=</span> <span class="st">"Kate"</span> <span class="kw">in</span> grades</span>
<span id="cb171-4"><a href=""></a><span class="bu">print</span>(joel_has_grade)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>True</code></pre>
</div>
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb173-1"><a href=""></a><span class="bu">print</span>(kate_has_grade)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>False</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb175-1"><a href=""></a><span class="co"># Exemplo de get</span></span>
<span id="cb175-2"><a href=""></a>joels_grade <span class="op">=</span> grades.get(<span class="st">"Joel"</span>, <span class="dv">0</span>)</span>
<span id="cb175-3"><a href=""></a>kates_grade <span class="op">=</span> grades.get(<span class="st">"Kate"</span>, <span class="dv">0</span>)</span>
<span id="cb175-4"><a href=""></a>no_ones_grade <span class="op">=</span> grades.get(<span class="st">"No One"</span>)</span>
<span id="cb175-5"><a href=""></a><span class="bu">print</span>(joels_grade)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>80</code></pre>
</div>
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb177-1"><a href=""></a><span class="bu">print</span>(kates_grade)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb179-1"><a href=""></a><span class="bu">print</span>(no_ones_grade)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>None</code></pre>
</div>
</div>
</section>
<section id="dicionários-2" class="slide level2">
<h2>Dicionários</h2>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb181-1"><a href=""></a><span class="co"># Exemplo de atribuição de valores</span></span>
<span id="cb181-2"><a href=""></a>grades[<span class="st">"Tim"</span>] <span class="op">=</span> <span class="dv">99</span></span>
<span id="cb181-3"><a href=""></a>grades[<span class="st">"Kate"</span>] <span class="op">=</span> <span class="dv">100</span></span>
<span id="cb181-4"><a href=""></a>num_students <span class="op">=</span> <span class="bu">len</span>(grades)</span>
<span id="cb181-5"><a href=""></a><span class="bu">print</span>(grades)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'Joel': 80, 'Tim': 99, 'Kate': 100}</code></pre>
</div>
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb183-1"><a href=""></a><span class="bu">print</span>(num_students)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>3</code></pre>
</div>
</div>
<p>Dicionários são muito utilizados para contadores, ou seja, para contar a frequência de ocorrência de elementos em uma lista. Vamos a um exemplo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb185-1"><a href=""></a><span class="co"># Exemplo de contadores</span></span>
<span id="cb185-2"><a href=""></a>document <span class="op">=</span> [<span class="st">"data"</span>, <span class="st">"science"</span>, <span class="st">"from"</span>, <span class="st">"scratch"</span>, <span class="st">"data"</span>, <span class="st">"science"</span>, <span class="st">"data"</span>]</span>
<span id="cb185-3"><a href=""></a>word_counts <span class="op">=</span> {}</span>
<span id="cb185-4"><a href=""></a><span class="cf">for</span> word <span class="kw">in</span> document:</span>
<span id="cb185-5"><a href=""></a>    <span class="cf">if</span> word <span class="kw">in</span> word_counts:</span>
<span id="cb185-6"><a href=""></a>        word_counts[word] <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb185-7"><a href=""></a>    <span class="cf">else</span>:</span>
<span id="cb185-8"><a href=""></a>        word_counts[word] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb185-9"><a href=""></a><span class="bu">print</span>(word_counts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'data': 3, 'science': 2, 'from': 1, 'scratch': 1}</code></pre>
</div>
</div>
</section>
<section id="dicionários-3" class="slide level2">
<h2>Dicionários</h2>
<hr>
<p>Frequentemente usamos dicionários para representar dados “semi-estruturados”. Por exemplo, poderíamos ter um dicionário por usuário em uma rede social, onde as chaves são os nomes das colunas e os valores são os dados do usuário. Por exemplo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb187-1"><a href=""></a><span class="co"># Exemplo de dicionários semi-estruturados</span></span>
<span id="cb187-2"><a href=""></a>tweet <span class="op">=</span> {</span>
<span id="cb187-3"><a href=""></a>    <span class="st">"user"</span> : <span class="st">"joelgrus"</span>,</span>
<span id="cb187-4"><a href=""></a>    <span class="st">"text"</span> : <span class="st">"Data Science."</span>,</span>
<span id="cb187-5"><a href=""></a>    <span class="st">"retweet_count"</span> : <span class="dv">100</span>,</span>
<span id="cb187-6"><a href=""></a>    <span class="st">"hashtags"</span> : [<span class="st">"#data"</span>, <span class="st">"#science"</span>, <span class="st">"#datascience"</span>, <span class="st">"#bigdata"</span>]</span>
<span id="cb187-7"><a href=""></a>}</span>
<span id="cb187-8"><a href=""></a><span class="bu">print</span>(tweet)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'user': 'joelgrus', 'text': 'Data Science.', 'retweet_count': 100, 'hashtags': ['#data', '#science', '#datascience', '#bigdata']}</code></pre>
</div>
</div>
</section>
<section id="dicionários-4" class="slide level2">
<h2>Dicionários</h2>
<hr>
<p>Além de procurar por chaves específicas, podemos olhar para todas elas. Por exemplo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb189-1"><a href=""></a><span class="co"># Exemplo de chaves e valores</span></span>
<span id="cb189-2"><a href=""></a>tweet_keys <span class="op">=</span> tweet.keys()</span>
<span id="cb189-3"><a href=""></a>tweet_values <span class="op">=</span> tweet.values()</span>
<span id="cb189-4"><a href=""></a>tweet_items <span class="op">=</span> tweet.items()</span>
<span id="cb189-5"><a href=""></a><span class="bu">print</span>(tweet_keys)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>dict_keys(['user', 'text', 'retweet_count', 'hashtags'])</code></pre>
</div>
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb191-1"><a href=""></a><span class="bu">print</span>(tweet_values)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>dict_values(['joelgrus', 'Data Science.', 100, ['#data', '#science', '#datascience', '#bigdata']])</code></pre>
</div>
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb193-1"><a href=""></a><span class="bu">print</span>(tweet_items)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>dict_items([('user', 'joelgrus'), ('text', 'Data Science.'), ('retweet_count', 100), ('hashtags', ['#data', '#science', '#datascience', '#bigdata'])])</code></pre>
</div>
</div>
<p>As chaves dos dicionários devem ser imutáveis, o que significa que podemos usar strings, números ou tuplas como chaves, mas não listas. Por exemplo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb195-1"><a href=""></a><span class="co"># Exemplo de chaves imutáveis</span></span>
<span id="cb195-2"><a href=""></a><span class="co">#bad idea</span></span>
<span id="cb195-3"><a href=""></a><span class="co">#bad_dict = {[1, 2, 3]: "one two three"}</span></span>
<span id="cb195-4"><a href=""></a><span class="co">#good idea</span></span>
<span id="cb195-5"><a href=""></a>good_dict <span class="op">=</span> {(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>): <span class="st">"one two three"</span>}</span>
<span id="cb195-6"><a href=""></a><span class="bu">print</span>(good_dict)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{(1, 2, 3): 'one two three'}</code></pre>
</div>
</div>
</section>
<section id="conjuntos" class="slide level2">
<h2>Conjuntos</h2>
<hr>
<p>Conjuntos são uma outra estrutura de dados em Python. Um conjunto é uma coleção de elementos distintos, ou seja, não há repetição de elementos. Os conjuntos em <code>python</code> são similares aos conjuntos em <code>matemática</code> e utilizam a função <code>set()</code> para criá-los. Vamos a exemplos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb197-1"><a href=""></a><span class="co"># Exemplo de conjuntos</span></span>
<span id="cb197-2"><a href=""></a>s <span class="op">=</span> <span class="bu">set</span>()</span>
<span id="cb197-3"><a href=""></a>s.add(<span class="dv">1</span>)</span>
<span id="cb197-4"><a href=""></a>s.add(<span class="dv">2</span>)</span>
<span id="cb197-5"><a href=""></a>s.add(<span class="dv">2</span>)</span>
<span id="cb197-6"><a href=""></a>x <span class="op">=</span> <span class="bu">len</span>(s)</span>
<span id="cb197-7"><a href=""></a>y <span class="op">=</span> <span class="dv">2</span> <span class="kw">in</span> s</span>
<span id="cb197-8"><a href=""></a>z <span class="op">=</span> <span class="dv">3</span> <span class="kw">in</span> s</span>
<span id="cb197-9"><a href=""></a><span class="bu">print</span>(s)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{1, 2}</code></pre>
</div>
<div class="sourceCode cell-code" id="cb199"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb199-1"><a href=""></a><span class="bu">print</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb201"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb201-1"><a href=""></a><span class="bu">print</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>True</code></pre>
</div>
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb203-1"><a href=""></a><span class="bu">print</span>(z)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>False</code></pre>
</div>
</div>
</section>
<section id="conjuntos-1" class="slide level2">
<h2>Conjuntos</h2>
<hr>
<p>Conjuntos são muito úteis para verificar a existência de elementos distintos em uma coleção<sup>1</sup>. Por exemplo, podemos verificar a existência de palavras distintas em um texto. Vamos a um exemplo:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb205"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb205-1"><a href=""></a><span class="co"># Exemplo de palavras distintas</span></span>
<span id="cb205-2"><a href=""></a>text <span class="op">=</span> <span class="st">"data science from scratch data science data"</span></span>
<span id="cb205-3"><a href=""></a>words <span class="op">=</span> text.split()</span>
<span id="cb205-4"><a href=""></a>word_set <span class="op">=</span> <span class="bu">set</span>(words)</span>
<span id="cb205-5"><a href=""></a><span class="bu">print</span>(words)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['data', 'science', 'from', 'scratch', 'data', 'science', 'data']</code></pre>
</div>
<div class="sourceCode cell-code" id="cb207"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb207-1"><a href=""></a><span class="bu">print</span>(word_set)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'from', 'science', 'scratch', 'data'}</code></pre>
</div>
</div>
<aside><ol class="aside-footnotes"><li id="fn1"><p>O que seria uma coleção? O que seria uma coleção? Uma coleção é um tipo de dado que armazena outros tipos de dados, ou seja, é uma estrutura de dados que contém um conjunto de elementos.</p></li></ol></aside></section>
<section class="slide level2">

<p><br> <br> <br> <br> <br></p>
<hr>
<h1 style="text-align:center;">
Introdução ao SPARK
</h1>
<hr>
</section>
<section id="big-data" class="slide level2">
<h2>Big Data</h2>
<hr>
<p><br></p>
<ul>
<li>Estamos em um período de transformação no modo em que estudamos, ensinamos e, principalmente, dirigimos as nossas vidas.</li>
</ul>
<div class="fragment">
<ul>
<li>Neste exato momento, uma verdadeira enxurrada de dados são gerados por dia, i.e.&nbsp;aproximadamente 2.5 quintilhões de bytes<sup>1</sup>, e estes dados estão sendo utilizados para nortear indivíduos, empresas e governos, e geralmente essa quantidade é dobranda a cada dois anos.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Toda vez que fazemos uma compra, uma ligação ou interagimos nas redes sociais, estamos produzindo esses dados.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>E com a recente conectividade em objetos, tal como relógios, carros e até geladeiras, as informações capturadas se tornam massivas e podem ser cruzadas para criar roadmaps cada vez mais elaborados, apontando e, até prevendo, o comportamento de empresas e clientes.</li>
</ul>
</div>
<aside><ol class="aside-footnotes"><li id="fn2"><p>2500000000000000000 Bytes <span class="math inline">\(\approx\)</span> 2.5 Exabytes </p></li></ol></aside></section>
<section id="big-data-1" class="slide level2">
<h2>Big Data</h2>
<hr>
<div style="text-align: center;">
<p><img data-src="images/1_b-X6jefi9190lQaH33KkDA.webp" class="relative" width="500"></p>
</div>
</section>
<section id="big-data-2" class="slide level2">
<h2>Big Data</h2>
<hr>
<h3 style="text-align:center" ;="">Mas afinal, qual a definição de Big Data?</h3>
<div class="fragment">
<div class="contrib">
<p>Big Data pode ser entendido como uma coleção de conjuntos de dados, grandes e complexos, que não podem ser processados por bancos de dados ou aplicações de processamento tradicionais.</p>
</div>
</div>
<div class="fragment">
<p><br></p>
<ul>
<li>O Google estima que a humanidade criou nos últimos 5 anos, o equivalente a 300 Exabytes de dados ou seja: 300.000.000.000.000.000.000 bytes de dados.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Podemos definir o conceito de Big Data como sendo conjuntos de dados extremamente amplos e que, por este motivo, necessitam de ferramentas especialmente preparadas para lidar com grandes volumes, de forma que toda e qualquer informação nestes meios possa ser encontrada, analisada e aproveitada em tempo hábil.</li>
</ul>
</div>
</section>
<section id="big-data-3" class="slide level2">
<h2>Big Data</h2>
<hr>
<p><br></p>
<ul>
<li>Muitos dos dados gerados, possuem um tempo de vida curto e se não analisados, perdem a utilidade.</li>
</ul>
<p><br></p>
<div class="fragment">
<ul>
<li>Dados são transformados em informação, que precisa ser colocada em contexto para que possa fazer sentido.</li>
</ul>
<p><br></p>
</div>
<div class="fragment">
<ul>
<li>É caro integrar grandes volumes de dados não-estruturados, pois vai exigir muito poder computacional consequentemente máquinas mais poderosas e mais caras.</li>
</ul>
</div>
</section>
<section id="big-data-4" class="slide level2">
<h2>Big Data</h2>
<hr>
<p><br></p>
<div class="fragment">
<p>Trabalhar com Big Data exige alguns desafios:</p>
</div>
<div class="fragment">
<ul>
<li>Encontrar profissionais habilitados em Big Data.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Compreender as plataformas e ferramentas para Big Data.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Coletar, armazenar e analisar dados de diferentes fontes, em diferentes formatos e gerados em diferentes velocidades.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Migrar do sistema tradicional de coleta e armazenamento de dados, para uma estrutura de Big Data.</li>
</ul>
</div>
</section>
<section id="big-data-5" class="slide level2">
<h2>Big Data</h2>
<hr>
<p>O Big Data são caracterizados por 4 V’s<sup>1</sup>, que são:</p>
<div style="text-align: center;">
<p><img data-src="images/4v.png" class="relative" width="900"></p>
</div>
<aside><ol class="aside-footnotes"><li id="fn3"><p>Algumas definições incluem o <em>Valor</em> como 5 V.</p></li></ol></aside></section>
<section id="big-data-6" class="slide level2">
<h2>Big Data</h2>
<hr>
<p><br></p>
<div class="columns">
<div class="column" style="width:45%;">
<h3>
Volume
</h3>
<ul>
<li>O volume refere-se à quantidade de dados que são gerados, armazenados e processados.</li>
</ul>
<p><br></p>
<h3>
Velocidade
</h3>
<ul>
<li>A velocidade refere-se à rapidez com que os dados são gerados, armazenados e processados.</li>
</ul>
</div><div class="column" style="width:10%;">

</div><div class="column" style="width:45%;">
<h3>
Variedade
</h3>
<ul>
<li>A variedade refere-se aos diferentes tipos de dados que são gerados, armazenados e processados.</li>
</ul>
<!-- Como os dados estruturados são dados que são organizados em tabelas e são fáceis de serem processados e os dados não-estruturados são dados que não possuem uma estrutura definida e são difíceis de serem processados. -->
<p><br></p>
<h3>
Veracidade
</h3>
<ul>
<li>A veracidade refere-se à qualidade dos dados que são gerados, armazenados e processados.</li>
</ul>
</div></div>
</section>
<section id="big-data-7" class="slide level2">
<h2>Big Data</h2>
<hr>
<div style="text-align: center;">
<p><img data-src="images/4v3.png" class="relative" width="1200"></p>
</div>
</section>
<section class="slide level2">

<p><br> <br> <br> <br> <br></p>
<hr>
<h1 style="text-align:center;">
Apache Spark
</h1>
<hr>
</section>
<section id="apache-spark" class="slide level2">
<h2>Apache Spark</h2>
<hr>
<div class="columns">
<div class="column" style="width:25%;">
<div style="text-align:right;">
<p><img data-src="images/spark.webp" class="relative" width="200"></p>
</div>
</div><div class="column" style="width:40%;">
<div style="text-align:left; margin-top:70px;">
<p><a href="https://spark.apache.org/" class="uri">https://spark.apache.org/</a></p>
</div>
</div></div>
<ul>
<li><p>O Apache Spark é um framework de computação distribuída de código aberto, que fornece uma interface de programação unificada para processamento de dados em larga escala.</p></li>
<li><p>O Spark foi desenvolvido para ser rápido, fácil de usar e oferecer suporte a uma ampla variedade de aplicativos de processamento de dados de forma eficiente e escalável.</p></li>
<li><p>O Spark é amplamente utilizado em empresas de tecnologia, finanças, saúde, varejo e outras indústrias para processar grandes volumes de dados e executar análises em tempo real.</p></li>
<li><p>Pode ser usado com linguagens <strong>Python, R, Scala e Java</strong> e oferece suporte a bibliotecas para diversas tarefas, desde <strong>consultas SQL</strong> até <strong>processamento de streaming</strong> e <strong>aprendizado de máquina</strong>.</p></li>
</ul>
</section>
<section id="apache-spark-1" class="slide level2">
<h2>Apache Spark</h2>
<hr>
<p>O Apache Spark oferece basicamente 3 principais benefícios:</p>
<ol type="1">
<li><p><strong>Facilidade de uso</strong> – é possível desenvolver API’s de alto nível em Java, Scala, Python e R, que permitem focar apenas no conteúdo a ser computado, sem se preocupar com configurações de baixo nível e extremamente técnicas.</p></li>
<li><p><strong>Velocidade</strong> – Spark é veloz, permitindo uso iterativo e processamento rápido de algoritmos complexos. Velocidade é uma característica especialmente importante no processamento de grandes conjuntos de dados e pode fazer a diferença entre analisar os dados de forma interativa ou ficar aguardando vários minutos pelo fim de cada processamento. Com Spark, o processamento é feito em memória.</p></li>
<li><p><strong>Uso geral</strong> – Spark permite a utilização de diferentes tipos de computação, como processamento de linguagem SQL (SQL Spark), processamento de texto, Machine Learning (MLlib) e processamento de grafos (GraphX). Estas características fazem do Spark uma excelente opção para projetos de Big Data. Além de <strong>Bibliotecas Externas (Pacotes de Terceiros)</strong> que estendem a funcionalidade do Spark, e podem ser encontradas em <a href="https://spark-packages.org/" class="uri">https://spark-packages.org/</a>.</p></li>
</ol>
</section>
<section id="apache-spark-2" class="slide level2">
<h2>Apache Spark</h2>
<hr>
<p><br></p>
<p>As APIs de linguagem do Spark permitem que você escreva código Spark usando várias linguagens de programação. Os conceitos centrais do Spark são traduzidos para o código Spark que roda no cluster.</p>
<div class="fragment">
<ul>
<li><strong>Scala:</strong> Linguagem “nativa” do Spark, oferece a API mais direta.</li>
<li><strong>Java:</strong> Suporte completo, permitindo escrever código Spark em Java.</li>
<li><strong>Python (PySpark):</strong> API robusta que permite a manipulação de dados em larga escala.</li>
<li><strong>R (SparkR e sparklyr):</strong> Duas bibliotecas que fornecem interfaces familiares de R para o Spark.</li>
<li><strong>SQL:</strong> Suporta um subconjunto do padrão ANSI SQL 2003, permitindo que analistas executem consultas SQL diretamente.</li>
</ul>
</div>
</section>
<section id="apache-spark-3" class="slide level2">
<h2>Apache Spark</h2>
<h4>
Relação entre SparkSession e APIs de Linguagem
</h4>
<hr>
<p><br></p>
<div class="r-stack">
<p><img data-src="images/spark_language_apis.png" style="width:80.0%;height:80.0%"></p>
<!-- *Esta imagem demonstra como a SparkSession serve como ponto de entrada e a interface para as diferentes linguagens.* -->
</div>
</section>
<section id="apache-spark-4" class="slide level2">
<h2>Apache Spark</h2>
<h4>
O Ponto de Entrada: SparkSession
</h4>
<hr>
<p>A <strong>SparkSession</strong> é o ponto de entrada para qualquer aplicação Spark. É através dela que você controla a aplicação e suas manipulações no cluster.</p>
<div class="fragment">
<ul>
<li>Em modos interativos (como consoles), a SparkSession é criada implicitamente.</li>
<li>Em aplicações <em>standalone</em>, você deve criar o objeto <code>SparkSession</code> manualmente.</li>
</ul>
</div>
<div class="fragment">
<p><strong>Exemplo (Scala):</strong></p>
<pre><code>import org.apache.spark.sql.SparkSession
val spark = SparkSession.builder()
  .appName("MeuAppSpark")
  .config("spark.sql.warehouse.dir", "/user/hive/warehouse")
  .getOrCreate()</code></pre>
</div>
<div class="fragment">
<p>Exemplo (Python):</p>
<pre><code>from pyspark.sql import SparkSession
spark = SparkSession.builder\
  .master("local")\
  .appName("ContadorDePalavras")\
  .config("spark.some.config.option", "some-value")\
  .getOrCreate()</code></pre>
</div>
</section>
<section id="apache-spark-5" class="slide level2">
<h2>Apache Spark</h2>
<h4>
DataFrames: Distribuído vs.&nbsp;Máquina Única
</h4>
<hr>
<div class="r-stack">
<p><img data-src="images/dataframe_distributed.png"></p>
</div>
</section>
<section id="apache-spark-6" class="slide level2">
<h2>Apache Spark</h2>
<h4>
DataFrames vs.&nbsp;Datasets vs.&nbsp;RDDs
</h4>
<hr>
<ul>
<li><strong>DataFrames:</strong> Coleções tabelares distribuídas, otimizadas internamente pelo Spark. Disponíveis em todas as linguagens (Scala, Java, Python, R). São Datasets de tipo Row.</li>
</ul>
<div class="fragment">
<ul>
<li><strong>Datasets:</strong> Coleções distribuídas type-safe, onde você pode atribuir uma classe Java/Scala aos registros. A verificação de tipos ocorre em tempo de compilação. Disponíveis apenas em Scala e Java.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><strong>RDDs (Resilient Distributed Datasets):</strong> Abstração de baixo nível. Coleções imutáveis e distribuídas de objetos Java, Scala ou Python. Oferecem controle máximo, mas exigem mais esforço manual e menos otimizações automáticas.</li>
</ul>
</div>
<div class="fragment">
<blockquote>
<p>Recomendação: Priorize DataFrames/Datasets sempre que possível, pois o Spark otimiza melhor as operações com essas APIs. RDDs são para controle mais granular, especialmente para distribuição física de dados ou código legado.</p>
</blockquote>
</div>
</section>
<section id="apache-spark-7" class="slide level2">
<h2>Apache Spark</h2>
<h4>
Avaliação Preguiçosa (Lazy Evaluation)
</h4>
<hr>
<p><br></p>
<ul>
<li>A avaliação preguiçosa significa que o Spark espera até o último momento possível para executar as instruções.</li>
</ul>
<p><br></p>
<div class="fragment">
<ul>
<li>Ao invés de modificar os dados imediatamente, você constrói um plano de transformações que deseja aplicar aos seus dados de origem.</li>
</ul>
<p><br></p>
<p><strong>Benefícios:</strong> O Spark pode otimizar todo o fluxo de dados de ponta a ponta.</p>
<!-- Exemplo: Predicated Pushdown: Se um filtro for especificado no final de um job Spark grande,
o Spark pode otimizá-lo para acessar apenas os registros necessários na fonte de dados,
empurrando o filtro para baixo. -->
</div>
</section>
<section id="apache-spark-8" class="slide level2">
<h2>Apache Spark</h2>
<h4>
<em>Ações:</em> Acionando a execução
</h4>
<hr>
<ul>
<li>As transformações permitem construir o plano lógico de manipulação de dados. Para acionar a execução, você executa uma ação.</li>
</ul>
<div class="fragment">
<ul>
<li><p>Uma ação instrui o Spark a computar um resultado a partir de uma série de transformações.</p></li>
<li><p><em>Exemplo mais simples:</em> <code>count()</code></p>
<ul>
<li>retorna o número total de registros no DataFrame.</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<p><strong>Tipos de Ações:</strong></p>
<ul>
<li><p>Visualizar dados no console: <code>show()</code>, <code>printSchema()</code>.</p></li>
<li><p>Coletar dados para objetos nativos: <code>collect()</code>, <code>take()</code>.</p></li>
<li><p>Escrever dados para fontes de saída: <code>write.format().save()</code>.</p></li>
</ul>
</div>
</section>
<section id="apache-spark-9" class="slide level2">
<h2>Apache Spark</h2>
<hr>
<p><br></p>
<h3>
Parquet
</h3>
<ul>
<li>O Apache Parquet é um formato de arquivo de código aberto para armazenar dados em colunas.</li>
</ul>
<div class="fragment">
<ul>
<li>Ele é projetado para ser eficiente em termos de espaço e velocidade de leitura/escrita.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>O Parquet é especialmente útil para consultas analíticas em que você normalmente lê apenas algumas colunas de um grande conjunto de dados.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>O Parquet é amplamente utilizado em sistemas de Big Data, como o Apache Hadoop e o Apache Spark.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Ele armazena grande volume de dados em disco, de forma compacta e eficiente, e permite a leitura de dados de forma rápida e eficiente.</li>
</ul>
</div>
</section>
<section id="apache-spark-10" class="slide level2">
<h2>Apache Spark</h2>
<h4>
Spark UI: Monitoramento Visual
</h4>
<hr>
<ul>
<li>A Spark UI é uma ferramenta gráfica incluída no Spark para monitorar o progresso dos jobs.</li>
</ul>
<div class="fragment">
<ul>
<li><p><em>Acesso:</em> Disponível na porta 4040 (http://localhost:4040 em modo local).</p></li>
<li><p><em>Informações:</em> Exibe detalhes sobre o estado dos jobs Spark, ambiente e estado do cluster.</p></li>
<li><p><em>Utilidade:</em> Essencial para tuning de desempenho e depuração de aplicações.</p></li>
</ul>
</div>
<div class="fragment">
<p><em>Exemplo:</em> Visão Geral de um Job no Spark UI</p>
<p><img data-src="images/spark_ui_job.png" class="relative" style="width:60.0%"></p>
</div>
</section>
<section id="apache-spark-11" class="slide level2">
<h2>Apache Spark</h2>
<h4>
Spark UI: Detalhes do Job, Stages e Tasks
</h4>
<hr>
<ul>
<li><p>Um Job Spark representa um conjunto de transformações acionadas por uma ação individual.</p></li>
<li><p>Os Jobs são divididos em Stages (fases). O número de stages depende das operações de shuffle necessárias.</p></li>
<li><p>Cada Stage consiste em Tasks (tarefas). Cada tarefa corresponde a um bloco de dados e um conjunto de transformações a serem executadas por um executor.</p></li>
</ul>
<div class="fragment">
<p><strong>Monitore:</strong></p>
<ul>
<li><p>Jobs Tab: Visão geral dos jobs Spark.</p></li>
<li><p>Stages Tab: Detalhes de cada stage e suas tarefas.</p></li>
<li><p>Storage Tab: Informações sobre RDDs/DataFrames em cache.</p></li>
<li><p>Environment Tab: Configurações e propriedades do Spark.</p></li>
<li><p>SQL Tab: Planos de consulta das APIs estruturadas.</p></li>
<li><p>Executors Tab: Informações detalhadas sobre cada executor.</p></li>
</ul>
</div>
</section>
<section id="apache-spark-12" class="slide level2">
<h2>Apache Spark</h2>
<hr>
<p><br> <br> <br> <br> <br></p>
<h3 style="text-align:center">
Vamos usar o Spark no python e R!
</h3>
</section>
<section class="slide level2">

<br> <br> <br> <br> <br>
<hr>
<h3 style="text-align:center">
Análise Exploratória com SPARK + R
</h3>
<hr>
</section>
<section id="apache-spark-13" class="slide level2">
<h2>Apache Spark</h2>
Análise Exploratória com Spark e R
<hr>
<p><strong>Preparando o ambiente para utilizar o Sparklyr</strong></p>
<ul>
<li>O Apache Spark depende de outros sistemas, portanto, antes do Spark é preciso instalar as dependências. Primeiro, deve-se instalar o java</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb211-1"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"sparklyr"</span>)</span>
<span id="cb211-2"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span>
<span id="cb211-3"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"e1071"</span>)</span>
<span id="cb211-4"><a href=""></a><span class="fu">install.packages</span>(<span class="st">"ggplot2"</span>)</span>
<span id="cb211-5"><a href=""></a><span class="co"># Para utilização no Google Colab</span></span>
<span id="cb211-6"><a href=""></a><span class="co">#remotes::install_github("GabeChurch/sparkedatools", upgrade = "never")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Lendo as bibliotecas necessárias</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb212"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb212-1"><a href=""></a><span class="fu">library</span>(sparklyr)</span>
<span id="cb212-2"><a href=""></a><span class="fu">library</span>(dplyr)</span>
<span id="cb212-3"><a href=""></a><span class="co">#' ---</span></span>
<span id="cb212-4"><a href=""></a><span class="fu">library</span>(e1071) <span class="co"># Para Skewness e Kurtosis</span></span>
<span id="cb212-5"><a href=""></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb212-6"><a href=""></a><span class="co">#' ---</span></span>
<span id="cb212-7"><a href=""></a><span class="co"># Para utilização no Google Colab</span></span>
<span id="cb212-8"><a href=""></a><span class="co">#library(sparkedatools)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="apache-spark-14" class="slide level2">
<h2>Apache Spark</h2>
Análise Exploratória com Spark e R
<hr>
<ul>
<li>Indicando o caminho do Spark instalado na máquina</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb213"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb213-1"><a href=""></a><span class="co"># Definindo o caminho do Spark</span></span>
<span id="cb213-2"><a href=""></a></span>
<span id="cb213-3"><a href=""></a><span class="fu">Sys.setenv</span>(<span class="at">SPARK_HOME=</span><span class="st">"/home/jodavid/spark-3.5.7-bin-hadoop3"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p><br></p>
<ul>
<li>Criando o ambiente Spark</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb214"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb214-1"><a href=""></a>spark_conn <span class="ot">&lt;-</span> <span class="fu">spark_connect</span>(<span class="at">master =</span> <span class="st">"local"</span>,</span>
<span id="cb214-2"><a href=""></a>              <span class="at">config=</span><span class="fu">list</span>(<span class="at">spark.sql.warehouse.dir=</span><span class="fu">Sys.getenv</span>(<span class="st">"SPARK_HOME"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="apache-spark-15" class="slide level2">
<h2>Apache Spark</h2>
Análise Exploratória com Spark e R
<hr>
<ul>
<li>Lendo os dados <code>parquet</code> com Spark</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb215"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb215-1"><a href=""></a><span class="co">#' -----------------------</span></span>
<span id="cb215-2"><a href=""></a><span class="co">#' Lendo arquivos parquet</span></span>
<span id="cb215-3"><a href=""></a><span class="co">#' -----------------------</span></span>
<span id="cb215-4"><a href=""></a>dados <span class="ot">&lt;-</span> <span class="fu">spark_read_parquet</span>(spark_conn,</span>
<span id="cb215-5"><a href=""></a>          <span class="at">name =</span> <span class="st">"../dados/base_e-commerce_parquet/database_compras_parquet.parquet"</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p><br></p>
<ul>
<li>Visualizando a quantidade de DataFrames carregados no Spark</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb216"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb216-1"><a href=""></a><span class="co">#' -----------------------</span></span>
<span id="cb216-2"><a href=""></a><span class="co">#' Lista de data.frames existentes no Spark</span></span>
<span id="cb216-3"><a href=""></a><span class="co">#' -----------------------</span></span>
<span id="cb216-4"><a href=""></a><span class="fu">src_tbls</span>(spark_conn)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "database_compras_parquet_0ca63caa_b062_4c48_a7db_80086515be03"</code></pre>
</div>
</div>
</div>
</section>
<section id="apache-spark-16" class="slide level2">
<h2>Apache Spark</h2>
Análise Exploratória com Spark e R
<hr>
<ul>
<li>Verificando as primeiras linhas do DataFrame</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb218"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb218-1"><a href=""></a><span class="co">#' -----------------------</span></span>
<span id="cb218-2"><a href=""></a><span class="co">#' Visualizando as primeiras linhas do DataFrame</span></span>
<span id="cb218-3"><a href=""></a><span class="co">#' -----------------------</span></span>
<span id="cb218-4"><a href=""></a>dados <span class="sc">|&gt;</span></span>
<span id="cb218-5"><a href=""></a>  <span class="fu">head</span>(<span class="dv">5</span>) <span class="sc">|&gt;</span></span>
<span id="cb218-6"><a href=""></a>  <span class="fu">show</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [?? x 26]
# Database: spark_connection
  DsOrigem DsCanalVenda DsUnidadeNegocio DsTipo   NrPedido DhPedido           
  &lt;chr&gt;    &lt;chr&gt;        &lt;chr&gt;            &lt;chr&gt;       &lt;int&gt; &lt;dttm&gt;             
1 SITE     SITE         B2C              Produto 245467291 2020-11-27 19:16:00
2 SITE     APP          B2C              Produto 245386940 2020-11-27 17:20:00
3 SITE     APP          B2C              Produto 244921763 2020-11-27 05:37:00
4 SITE     MOBI         B2C              Produto 245438285 2020-11-27 18:34:00
5 SITE     APP          B2C              Produto 245005785 2020-11-27 07:58:00
# ℹ 20 more variables: NrFilial &lt;int&gt;, NrLojista &lt;int&gt;, InMarketPlace &lt;lgl&gt;,
#   InRetira &lt;lgl&gt;, VrVendaLiquida &lt;dbl&gt;, VrDescontoTotal &lt;dbl&gt;,
#   VrFreteCliente &lt;dbl&gt;, QtItem &lt;int&gt;, NrItemLoja &lt;int&gt;, NrItemSite &lt;int&gt;,
#   DsItemSite &lt;chr&gt;, NrDepartamentoSite &lt;int&gt;, DsDepartamentoSite &lt;chr&gt;,
#   NrSetorSite &lt;int&gt;, DsSetorSite &lt;chr&gt;, NrFamiliaSite &lt;int&gt;,
#   DsFamiliaSite &lt;chr&gt;, NrMarcaSite &lt;int&gt;, DsMarcaSite &lt;chr&gt;, DsSingleId &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="apache-spark-17" class="slide level2">
<h2>Apache Spark</h2>
Análise Exploratória com Spark e R
<hr>
<p><br></p>
<ul>
<li>Verificando as quantidades de linhas e colunas da base de dados</li>
</ul>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb220"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb220-1"><a href=""></a><span class="co">#' -----------------------</span></span>
<span id="cb220-2"><a href=""></a><span class="co">#' Verificando número de linhas e colunas</span></span>
<span id="cb220-3"><a href=""></a><span class="co">#' -----------------------</span></span>
<span id="cb220-4"><a href=""></a><span class="fu">sdf_dim</span>(dados)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 338185     26</code></pre>
</div>
<div class="sourceCode cell-code" id="cb222"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb222-1"><a href=""></a><span class="fu">sdf_nrow</span>(dados)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 338185</code></pre>
</div>
<div class="sourceCode cell-code" id="cb224"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb224-1"><a href=""></a><span class="fu">sdf_ncol</span>(dados)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 26</code></pre>
</div>
</div>
</section>
<section id="apache-spark-18" class="slide level2">
<h2>Apache Spark</h2>
Análise Exploratória com Spark e R
<hr>
<p><br></p>
<ul>
<li>Verificando os nomes das colunas</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb226"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb226-1"><a href=""></a><span class="co">#' -----------------------</span></span>
<span id="cb226-2"><a href=""></a><span class="co">#' Verificando os nomes das colunas</span></span>
<span id="cb226-3"><a href=""></a><span class="co">#' -----------------------</span></span>
<span id="cb226-4"><a href=""></a><span class="fu">colnames</span>(dados)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "DsOrigem"           "DsCanalVenda"       "DsUnidadeNegocio"  
 [4] "DsTipo"             "NrPedido"           "DhPedido"          
 [7] "NrFilial"           "NrLojista"          "InMarketPlace"     
[10] "InRetira"           "VrVendaLiquida"     "VrDescontoTotal"   
[13] "VrFreteCliente"     "QtItem"             "NrItemLoja"        
[16] "NrItemSite"         "DsItemSite"         "NrDepartamentoSite"
[19] "DsDepartamentoSite" "NrSetorSite"        "DsSetorSite"       
[22] "NrFamiliaSite"      "DsFamiliaSite"      "NrMarcaSite"       
[25] "DsMarcaSite"        "DsSingleId"        </code></pre>
</div>
</div>
</section>
<section id="apache-spark-19" class="slide level2">
<h2>Apache Spark</h2>
Análise Exploratória com Spark e R
<hr>
<p><br></p>
<ul>
<li>Verificando o esquema (estrutura) do DataFrame</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb228"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb228-1"><a href=""></a><span class="co">#' -----------------------</span></span>
<span id="cb228-2"><a href=""></a><span class="co">#' Verificando o esquema (estrutura) do DataFrame</span></span>
<span id="cb228-3"><a href=""></a><span class="co">#' -----------------------</span></span>
<span id="cb228-4"><a href=""></a><span class="fu">sdf_schema</span>(dados)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$DsOrigem
$DsOrigem$name
[1] "DsOrigem"

$DsOrigem$type
[1] "StringType"


$DsCanalVenda
$DsCanalVenda$name
[1] "DsCanalVenda"

$DsCanalVenda$type
[1] "StringType"


$DsUnidadeNegocio
$DsUnidadeNegocio$name
[1] "DsUnidadeNegocio"

$DsUnidadeNegocio$type
[1] "StringType"


$DsTipo
$DsTipo$name
[1] "DsTipo"

$DsTipo$type
[1] "StringType"


$NrPedido
$NrPedido$name
[1] "NrPedido"

$NrPedido$type
[1] "IntegerType"


$DhPedido
$DhPedido$name
[1] "DhPedido"

$DhPedido$type
[1] "TimestampType"


$NrFilial
$NrFilial$name
[1] "NrFilial"

$NrFilial$type
[1] "IntegerType"


$NrLojista
$NrLojista$name
[1] "NrLojista"

$NrLojista$type
[1] "IntegerType"


$InMarketPlace
$InMarketPlace$name
[1] "InMarketPlace"

$InMarketPlace$type
[1] "BooleanType"


$InRetira
$InRetira$name
[1] "InRetira"

$InRetira$type
[1] "BooleanType"


$VrVendaLiquida
$VrVendaLiquida$name
[1] "VrVendaLiquida"

$VrVendaLiquida$type
[1] "DoubleType"


$VrDescontoTotal
$VrDescontoTotal$name
[1] "VrDescontoTotal"

$VrDescontoTotal$type
[1] "DoubleType"


$VrFreteCliente
$VrFreteCliente$name
[1] "VrFreteCliente"

$VrFreteCliente$type
[1] "DoubleType"


$QtItem
$QtItem$name
[1] "QtItem"

$QtItem$type
[1] "IntegerType"


$NrItemLoja
$NrItemLoja$name
[1] "NrItemLoja"

$NrItemLoja$type
[1] "IntegerType"


$NrItemSite
$NrItemSite$name
[1] "NrItemSite"

$NrItemSite$type
[1] "IntegerType"


$DsItemSite
$DsItemSite$name
[1] "DsItemSite"

$DsItemSite$type
[1] "StringType"


$NrDepartamentoSite
$NrDepartamentoSite$name
[1] "NrDepartamentoSite"

$NrDepartamentoSite$type
[1] "IntegerType"


$DsDepartamentoSite
$DsDepartamentoSite$name
[1] "DsDepartamentoSite"

$DsDepartamentoSite$type
[1] "StringType"


$NrSetorSite
$NrSetorSite$name
[1] "NrSetorSite"

$NrSetorSite$type
[1] "IntegerType"


$DsSetorSite
$DsSetorSite$name
[1] "DsSetorSite"

$DsSetorSite$type
[1] "StringType"


$NrFamiliaSite
$NrFamiliaSite$name
[1] "NrFamiliaSite"

$NrFamiliaSite$type
[1] "IntegerType"


$DsFamiliaSite
$DsFamiliaSite$name
[1] "DsFamiliaSite"

$DsFamiliaSite$type
[1] "StringType"


$NrMarcaSite
$NrMarcaSite$name
[1] "NrMarcaSite"

$NrMarcaSite$type
[1] "IntegerType"


$DsMarcaSite
$DsMarcaSite$name
[1] "DsMarcaSite"

$DsMarcaSite$type
[1] "StringType"


$DsSingleId
$DsSingleId$name
[1] "DsSingleId"

$DsSingleId$type
[1] "StringType"</code></pre>
</div>
</div>
</section>
<section id="apache-spark-20" class="slide level2">
<h2>Apache Spark</h2>
Análise Exploratória com Spark e R
<hr>
<ul>
<li>Resumo estatístico do DataFrame</li>
</ul>
<div class="cell" data-result="asis">
<div class="sourceCode cell-code" id="cb230"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb230-1"><a href=""></a><span class="co">#' ------------------------------------</span></span>
<span id="cb230-2"><a href=""></a><span class="co">#' Análise Descritiva  de algumas variáveis</span></span>
<span id="cb230-3"><a href=""></a><span class="co">#' -----------------</span></span>
<span id="cb230-4"><a href=""></a>colunas_selecionadas <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'VrVendaLiquida'</span>,<span class="st">'VrDescontoTotal'</span>,<span class="st">'VrFreteCliente'</span>,<span class="st">'QtItem'</span>)</span>
<span id="cb230-5"><a href=""></a><span class="co">#' ------</span></span>
<span id="cb230-6"><a href=""></a>dados <span class="sc">|&gt;</span></span>
<span id="cb230-7"><a href=""></a>  <span class="fu">select</span>(colunas_selecionadas) <span class="sc">|&gt;</span></span>
<span id="cb230-8"><a href=""></a>    <span class="fu">sdf_describe</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;`sparklyr_tmp_db8598cc_f39c_4084_88ca_40fe600844fe`&gt; [?? x 5]
# Database: spark_connection
  summary VrVendaLiquida     VrDescontoTotal    VrFreteCliente    QtItem        
  &lt;chr&gt;   &lt;chr&gt;              &lt;chr&gt;              &lt;chr&gt;             &lt;chr&gt;         
1 count   338185             338185             338185            338185        
2 mean    873.3852436985125  34.87990191759762  15.35626325828306 1.09994529621…
3 stddev  1127.6857097326094 130.38245321515902 36.41660380059874 0.58722695847…
4 min     0.0                0.0                -4.92             1             
5 max     94950.0            5226.34            2452.89           80            </code></pre>
</div>
</div>
</section>
<section id="apache-spark-21" class="slide level2">
<h2>Apache Spark</h2>
Análise Exploratória com Spark e R
<hr>
<ul>
<li>Gerando um histograma</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb232"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb232-1"><a href=""></a><span class="co">#' -----------------------</span></span>
<span id="cb232-2"><a href=""></a><span class="co">#' Histograma da variável VrVendaLiquida</span></span>
<span id="cb232-3"><a href=""></a><span class="co">#' -----------------------</span></span>
<span id="cb232-4"><a href=""></a>dados <span class="sc">|&gt;</span></span>
<span id="cb232-5"><a href=""></a>  <span class="fu">select</span>(VrVendaLiquida) <span class="sc">|&gt;</span></span>
<span id="cb232-6"><a href=""></a>  <span class="fu">sdf_collect</span>() <span class="sc">|&gt;</span></span>
<span id="cb232-7"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>VrVendaLiquida)) <span class="sc">+</span></span>
<span id="cb232-8"><a href=""></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">50</span>, <span class="at">fill=</span><span class="st">"blue"</span>, <span class="at">color=</span><span class="st">"black"</span>, <span class="at">alpha=</span><span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb232-9"><a href=""></a>    <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Histograma de VrVendaLiquida"</span>,</span>
<span id="cb232-10"><a href=""></a>         <span class="at">x=</span><span class="st">"VrVendaLiquida"</span>,</span>
<span id="cb232-11"><a href=""></a>         <span class="at">y=</span><span class="st">"Frequência"</span>) <span class="sc">+</span></span>
<span id="cb232-12"><a href=""></a>    <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="index_files/figure-revealjs/unnamed-chunk-81-1.png" width="960" class="r-stretch"></section>
<section id="apache-spark-22" class="slide level2">
<h2>Apache Spark</h2>
Análise Exploratória com Spark e R
<hr>
<ul>
<li>Fazendo um agrupamento e gráfico de barras</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb233"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb233-1"><a href=""></a><span class="co">#' ------------------------------------</span></span>
<span id="cb233-2"><a href=""></a><span class="co">#' 3.3 Fazendo um agrupamento e gráfico de barras</span></span>
<span id="cb233-3"><a href=""></a><span class="co">#' ------------------------------------</span></span>
<span id="cb233-4"><a href=""></a>total_de_linhas <span class="ot">&lt;-</span> <span class="fu">sdf_dim</span>(dados)[<span class="dv">1</span>]</span>
<span id="cb233-5"><a href=""></a><span class="co">#' ----------</span></span>
<span id="cb233-6"><a href=""></a>result <span class="ot">&lt;-</span></span>
<span id="cb233-7"><a href=""></a>  dados <span class="sc">|&gt;</span></span>
<span id="cb233-8"><a href=""></a>    <span class="fu">select</span>(<span class="fu">c</span>(DsCanalVenda,VrVendaLiquida)) <span class="sc">|&gt;</span></span>
<span id="cb233-9"><a href=""></a>    <span class="fu">group_by</span>(DsCanalVenda) <span class="sc">|&gt;</span></span>
<span id="cb233-10"><a href=""></a>    <span class="fu">summarise_all</span>(</span>
<span id="cb233-11"><a href=""></a>      <span class="fu">list</span>(<span class="at">n =</span> <span class="sc">~</span> <span class="fu">n</span>(),</span>
<span id="cb233-12"><a href=""></a>           <span class="at">mean =</span> <span class="sc">~</span> <span class="fu">mean</span>(.), <span class="at">min =</span> <span class="sc">~</span> <span class="fu">min</span>(.),</span>
<span id="cb233-13"><a href=""></a>           <span class="at">max =</span> <span class="sc">~</span> <span class="fu">max</span>(.), <span class="at">percent =</span> <span class="sc">~</span> <span class="fu">n</span>() <span class="sc">/</span> total_de_linhas</span>
<span id="cb233-14"><a href=""></a>           )</span>
<span id="cb233-15"><a href=""></a>      )</span>
<span id="cb233-16"><a href=""></a></span>
<span id="cb233-17"><a href=""></a><span class="fu">print</span>(result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   SQL [?? x 6]
# Database: spark_connection
  DsCanalVenda      n  mean   min    max percent
  &lt;chr&gt;         &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
1 FT            30338  453.  0.49  6400. 0.0897 
2 MTG            4723  511. 59     2700  0.0140 
3 APP          208604  861.  0    27074. 0.617  
4 SITE          30172 1148.  0    48412  0.0892 
5 PV            30415 1073.  0    94950  0.0899 
6 MOBI          31635  941.  0    21201. 0.0935 
7 TVEN           2298 1151.  0    14056. 0.00680</code></pre>
</div>
</div>
</section>
<section id="apache-spark-23" class="slide level2">
<h2>Apache Spark</h2>
Análise Exploratória com Spark e R
<hr>
<ul>
<li>Visualizando o gráfico de barras</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb235"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb235-1"><a href=""></a><span class="co">#' ----------</span></span>
<span id="cb235-2"><a href=""></a>result <span class="sc">|&gt;</span></span>
<span id="cb235-3"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> DsCanalVenda, <span class="at">y =</span> percent)) <span class="sc">+</span></span>
<span id="cb235-4"><a href=""></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb235-5"><a href=""></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Proporção de Vendas por Canal de Venda"</span>,</span>
<span id="cb235-6"><a href=""></a>       <span class="at">x =</span> <span class="st">"Canal de Venda"</span>,</span>
<span id="cb235-7"><a href=""></a>       <span class="at">y =</span> <span class="st">"Proporção de Vendas"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="index_files/figure-revealjs/unnamed-chunk-83-1.png" width="960" class="r-stretch"></section>
<section id="apache-spark-24" class="slide level2">
<h2>Apache Spark</h2>
Análise Exploratória com Spark e R
<hr>
<ul>
<li>Fazendo uma correlação entre variáveis</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb236"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb236-1"><a href=""></a><span class="co">#' ------------------------------------</span></span>
<span id="cb236-2"><a href=""></a><span class="co"># Forma 1</span></span>
<span id="cb236-3"><a href=""></a>features <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'VrVendaLiquida'</span>,<span class="st">'VrDescontoTotal'</span>,<span class="st">'VrFreteCliente'</span>,<span class="st">'QtItem'</span>) <span class="co">#selecionando as colunas</span></span>
<span id="cb236-4"><a href=""></a><span class="fu">ml_corr</span>(dados, <span class="at">columns =</span> features, <span class="at">method =</span> <span class="st">"pearson"</span>) <span class="co">#calculando a correlação</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  VrVendaLiquida VrDescontoTotal VrFreteCliente QtItem
           &lt;dbl&gt;           &lt;dbl&gt;          &lt;dbl&gt;  &lt;dbl&gt;
1         1               0.321          0.0976 0.0914
2         0.321           1              0.0685 0.107 
3         0.0976          0.0685         1      0.0397
4         0.0914          0.107          0.0397 1     </code></pre>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb238"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb238-1"><a href=""></a><span class="co">#' ------------------------------------</span></span>
<span id="cb238-2"><a href=""></a><span class="co"># Forma 2</span></span>
<span id="cb238-3"><a href=""></a>dados <span class="sc">|&gt;</span></span>
<span id="cb238-4"><a href=""></a>  <span class="fu">select</span>(<span class="fu">all_of</span>(features)) <span class="sc">|&gt;</span></span>
<span id="cb238-5"><a href=""></a>  <span class="fu">ml_corr</span>(<span class="at">method =</span> <span class="st">"pearson"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  VrVendaLiquida VrDescontoTotal VrFreteCliente QtItem
           &lt;dbl&gt;           &lt;dbl&gt;          &lt;dbl&gt;  &lt;dbl&gt;
1         1               0.321          0.0976 0.0914
2         0.321           1              0.0685 0.107 
3         0.0976          0.0685         1      0.0397
4         0.0914          0.107          0.0397 1     </code></pre>
</div>
</div>
</div>
</section>
<section class="slide level2">

<p><br> <br> <br> <br> <br></p>
<hr>
<h1 style="text-align:center;">
Mineração de Padrões Frequentes
</h1>
<h3 style="text-align:center;">
O método FP-Growth
</h3>
<hr>
</section>
<section id="por-que-minerar-padrões" class="slide level2">
<h2>Por que minerar padrões?</h2>
<hr>
<p><br></p>
<p>Em grandes volumes de dados (Big Data), uma importante tarefa é encontrar relacionamentos ocultos entre itens.</p>
<p><br> Alguns exemplos clássicos incluem:</p>
<ul>
<li><strong>Análise de Cesta de Compras:</strong> “Clientes que compram pão também compram leite?”</li>
</ul>
<div class="fragment">
<ul>
<li><strong>Navegação Web:</strong> “Quais páginas são frequentemente acessadas juntas em uma mesma sessão?”</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><strong>Bioinformática:</strong> “Quais combinações de genes estão ativas simultaneamente?”</li>
</ul>
</div>
<div class="fragment">
<p>Para isso, utilizamos técnicas de <strong>Regras de Associação</strong>.</p>
</div>
</section>
<section id="apriori-o-algoritmo-pioneiro" class="slide level2">
<h2>Apriori: O Algoritmo Pioneiro</h2>
<hr>
<p><br></p>
<ul>
<li>O Apriori foi um dos primeiros algoritmos para mineração de regras de associação.</li>
</ul>
<div class="fragment">
<ul>
<li>Ele funciona identificando conjuntos de itens frequentes e, em seguida, derivando regras a partir desses conjuntos.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>No entanto, o Apriori tem algumas limitações, especialmente quando se trata de grandes conjuntos de dados. Ele requer múltiplas varreduras do banco de dados, o que pode ser demorado.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><strong>O Gargalo:</strong> Ele precisa escanear o banco de dados muitas vezes.</li>
<li>Se temos 1 milhão de itens, o número de candidatos potenciais é astronômico (<span class="math inline">\(2^{1000000} - 1\)</span>).</li>
</ul>
<!-- . . .

> Em contextos de Big Data com Spark, escanear o disco repetidamente é extremamente custoso. Precisamos de algo melhor. -->
</div>
</section>
<section id="fpgrowth" class="slide level2">
<h2>FPGrowth</h2>
<h4>
Uma Abordagem Mais Eficiente
</h4>
<hr>
<p><br></p>
<ul>
<li>Para lidar com as limitações do Apriori, foi desenvolvido o FPGrowth (Frequent Pattern Growth).</li>
</ul>
<div class="fragment">
<ul>
<li>O FPGrowth utiliza uma estrutura de dados chamada FP-Tree (Frequent Pattern Tree) para compactar o banco de dados de transações.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Essa estrutura permite que o algoritmo encontre conjuntos de itens frequentes sem a necessidade de gerar candidatos explicitamente, tornando-o mais rápido e eficiente.</li>
</ul>
</div>
</section>
<section id="o-que-é-o-fpgrowth" class="slide level2">
<h2>O que é o FPGrowth?</h2>
<hr>
<p><br></p>
<ul>
<li><strong>Algoritmo de mineração de regras de associação</strong> que descobre padrões frequentes em grandes conjuntos de dados.</li>
</ul>
<p><br></p>
<ul>
<li><strong>Alternativa eficiente ao Apriori:</strong> Evita a geração de candidatos, usando uma estrutura de árvore para compactar o banco de dados.</li>
</ul>
<p><br></p>
<ul>
<li><strong>Ideal para Big Data:</strong> Escala bem com grandes volumes de dados e é adequado para implementação em plataformas distribuídas como o Spark.</li>
</ul>
</section>
<section id="como-funciona-o-fpgrowth" class="slide level2">
<h2>Como funciona o FPGrowth</h2>
<hr>
<p><br></p>
<ul>
<li><strong>FP-Tree (Frequent Pattern Tree):</strong> Árvore que representa as transações de forma compacta, mantendo a frequência dos itens.</li>
<li><strong>Construção da FP-Tree:</strong>
<ul>
<li>Escanear o banco de dados para encontrar a frequência de cada item.</li>
<li>Ordenar os itens em ordem decrescente de frequência.</li>
<li>Criar a FP-Tree inserindo as transações uma a uma, usando a ordem dos itens.</li>
</ul></li>
<li><strong>Mineração da FP-Tree:</strong>
<ul>
<li>Começar com os itens menos frequentes na árvore.</li>
<li>Construir uma árvore condicional para cada item.</li>
<li>Encontrar os conjuntos de itens frequentes recursivamente nessas árvores condicionais.</li>
</ul></li>
</ul>
</section>
<section id="conceitos-fundamentais" class="slide level2">
<h2>Conceitos Fundamentais</h2>
<hr>
<p><br></p>
<p>Antes de entrar no FP-Growth, precisamos entender as métricas que guiam esses algoritmos:</p>
<p><br></p>
<div class="columns">
<div class="column" style="width:33%;">
<h4 id="suporte-support">Suporte (Support)</h4>
<div style="font-size: 12pt;">
<p>A frequência com que um conjunto de itens aparece na base de dados.</p>
<p><span class="math display">\[Support(A \cup B) = \frac{N(A \cup B)}{N_{total}}\]</span></p>
</div>
</div><div class="column" style="width:33%;">
<h4 id="confiança-confidence">Confiança (Confidence)</h4>
<div style="font-size: 12pt;">
<p>Dada a compra de A, qual a probabilidade de comprar B?</p>
<p><span class="math display">\[Conf(A \rightarrow B) = \frac{Support(A \cup B)}{Support(A)}\]</span></p>
</div>
</div><div class="column" style="width:33%;">
<h4 id="lift">Lift</h4>
<div style="font-size: 12pt;">
<p>A compra de A aumenta a chance de compra de B mais do que o esperado ao acaso?</p>
<p><span class="math display">\[Lift &gt; 1\]</span></p>
<p>que indica dependência positiva.</p>
</div>
</div></div>
<p><br></p>
<p>em que <span class="math inline">\(N(A \cup B)\)</span> é o número de transações contendo ambos A e B, e <span class="math inline">\(N_{total}\)</span> é o número total de transações.</p>
</section>
<section id="como-a-fp-tree-é-construída" class="slide level2">
<h2>Como a FP-Tree é construída?</h2>
<hr>
<p><br></p>
<p><strong>Scan 1: Contagem e Ordenação</strong></p>
<ul>
<li>Calcula a frequência de cada item.</li>
<li>Descarta itens que não atingem o <code>minSupport</code><sup>1</sup>.</li>
<li>Ordena os itens restantes por frequência decrescente (do mais comum para o menos comum).</li>
</ul>
<div class="fragment">
<p><strong>Scan 2: Construção da Árvore</strong></p>
<ul>
<li>Lê cada transação novamente.</li>
<li>Filtra e ordena os itens da transação de acordo com a ordem do Scan 1.</li>
<li><em>Insere na árvore:</em> transações com prefixos iguais compartilham o mesmo caminho (nó), incrementando um contador.</li>
</ul>
</div>
<aside><ol class="aside-footnotes"><li id="fn4"><p><code>minSupport</code> é um hiperparâmetro que determina o valor mínimo do Suporte.</p></li></ol></aside></section>
<section id="exemplo-visual-da-construção" class="slide level2">
<h2>Exemplo Visual da Construção</h2>
<hr>
<p>Imagine as transações: <code>{Leite, Pão, Manteiga}</code>, <code>{Leite, Pão}</code>, <code>{Leite, Manteiga}</code>. Suponha que a ordem de frequência seja: Leite &gt; Pão &gt; Manteiga.</p>
<p>
</p><ol type="1">
<li><strong>Inserir {Leite, Pão, Manteiga}:</strong>
<ul>
<li>Raiz -&gt; Leite (1) -&gt; Pão (1) -&gt; Manteiga (1)</li>
</ul></li>
<li><strong>Inserir {Leite, Pão}:</strong>
<ul>
<li>Raiz -&gt; Leite (2) -&gt; Pão (2)</li>
<li><em>(Aproveita o caminho existente)</em></li>
</ul></li>
<li><strong>Inserir {Leite, Manteiga}:</strong>
<ul>
<li>Raiz -&gt; Leite (3) -&gt; Manteiga (1)</li>
<li><em>(Cria um novo ramo para Manteiga a partir de Leite)</em></li>
</ul></li>
</ol>
<div class="fragment">
<blockquote>
<p>A árvore resultante é menor que o dataset original!</p>
</blockquote>
</div>
</section>
<section id="teoria-minerando-a-fp-tree" class="slide level2">
<h2>Teoria: Minerando a FP-Tree</h2>
<hr>
<p><br></p>
<p>Uma vez que a árvore está na memória (ou distribuída no Spark), o método extrai os padrões:</p>
<ol type="1">
<li>Começa pelos itens menos frequentes (base da árvore).</li>
<li>Para cada item, constrói sua <strong>Base de Padrões Condicional</strong>: todos os caminhos na árvore que levam até aquele item.</li>
<li>A partir dessa base, constrói uma nova “mini” FP-Tree condicional.</li>
<li>Se essa mini-árvore tem um único caminho, todas as combinações desse caminho são padrões frequentes.</li>
<li>O processo é recursivo.</li>
</ol>
</section>
<section id="hiperparâmetros-fp-growth-no-spark" class="slide level2">
<h2>Hiperparâmetros FP-Growth no Spark</h2>
<hr>
<p>Ao utilizar FP-Growth no Spark (seja via R <code>sparklyr</code> ou Python <code>pyspark</code>), os principais hiperparâmetros que controlam o algoritmo são:</p>
<p><strong><code>minSupport</code> (Suporte Mínimo)</strong></p>
<ul>
<li>Define o limiar para um item ser considerado “frequente”.</li>
<li><em>Exemplo:</em> <code>0.05</code> significa que o item deve aparecer em pelo menos 5% de todas as transações.</li>
<li><strong>Impacto:</strong> Valores muito baixos podem gerar árvores gigantescas e estourar a memória, mesmo no Spark. Valores muito altos podem não encontrar nenhum padrão.</li>
</ul>
<div class="fragment">
<p><strong><code>minConfidence</code> (Confiança Mínima)</strong></p>
<ul>
<li>Usado após encontrar os conjuntos frequentes, para gerar as <strong>regras de associação</strong>.</li>
<li><em>Exemplo:</em> <code>0.6</code> significa que a regra só é válida se estiver correta 60% das vezes.</li>
</ul>
<!-- ---

## Outros Parâmetros Importantes no Spark

<hr/>

### `itemsCol`
*   O nome da coluna no seu DataFrame que contém a lista de itens (deve ser do tipo array/lista).

### `numPartitions`
*   O número de partições usadas para distribuir o trabalho.
*   No Spark, ajustar isso pode ser crucial para performance se o dataset for muito massivo, garantindo que a construção das árvores locais não sobrecarregue os executores.

--- -->
</div>
</section>
<section id="exemplo-prático" class="slide level2">
<h2>Exemplo Prático:</h2>
<h4>
O que esperar da saída?
</h4>
<hr>
<p><br></p>
<ul>
<li>Se rodarmos o FP-Growth em dados de um supermercado com <code>minSupport=0.1</code> e <code>minConfidence=0.5</code>.</li>
</ul>
<p><strong>Saída 1: Conjuntos Frequentes (Frequent Itemsets)</strong></p>
<p><em>(O que é comprado junto com frequência)</em></p>
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;">items</th>
<th style="text-align: left;">freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">[macarrão, molho]</td>
<td style="text-align: left;">150</td>
</tr>
<tr class="even">
<td style="text-align: left;">[cerveja, amendoim]</td>
<td style="text-align: left;">120</td>
</tr>
<tr class="odd">
<td style="text-align: left;">[leite, ovos, pão]</td>
<td style="text-align: left;">85</td>
</tr>
</tbody>
</table>
</section>
<section id="exemplo-prático-1" class="slide level2">
<h2>Exemplo Prático:</h2>
<h4>
O que esperar da saída?
</h4>
<hr>
<p><br></p>
<p><strong>Saída 2: Regras de Associação (Association Rules)</strong></p>
<p><em>(Relações de causa provável)</em></p>
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;">antecedent</th>
<th style="text-align: left;">consequent</th>
<th style="text-align: left;">confidence</th>
<th style="text-align: left;">lift</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">[amendoim]</td>
<td style="text-align: left;">[cerveja]</td>
<td style="text-align: left;">0.75</td>
<td style="text-align: left;">1.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">[macarrão]</td>
<td style="text-align: left;">[molho]</td>
<td style="text-align: left;">0.82</td>
<td style="text-align: left;">2.1</td>
</tr>
</tbody>
</table>
</section>
<section class="slide level2">

<br> <br> <br> <br> <br>
<hr>
<h3 style="text-align:center">
Sistema de Recomendação com SPARK + python
</h3>
<hr>
</section>
<section id="apache-spark-25" class="slide level2">
<h2>Apache Spark</h2>
Sistema de Recomendação com SPARK + python
<hr>
<p>Criando o ambiente SPARK no python</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb240"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb240-1"><a href=""></a><span class="co"># Importando a biblioteca os</span></span>
<span id="cb240-2"><a href=""></a><span class="im">import</span> os</span>
<span id="cb240-3"><a href=""></a><span class="co"># Definindo a variável de ambiente do Spark</span></span>
<span id="cb240-4"><a href=""></a>os.environ[<span class="st">"SPARK_HOME"</span>] <span class="op">=</span> <span class="st">"/home/jodavid/spark-3.5.7-bin-hadoop3"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Lendo as bibliotecas necessárias</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb241"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb241-1"><a href=""></a><span class="co"># importando a findspark</span></span>
<span id="cb241-2"><a href=""></a><span class="im">import</span> findspark</span>
<span id="cb241-3"><a href=""></a><span class="co"># iniciando o findspark</span></span>
<span id="cb241-4"><a href=""></a>findspark.init()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb242-1"><a href=""></a><span class="co"># ------------------------------------</span></span>
<span id="cb242-2"><a href=""></a><span class="co"># Importanto as bibliotecas</span></span>
<span id="cb242-3"><a href=""></a><span class="co"># -----------------</span></span>
<span id="cb242-4"><a href=""></a><span class="im">from</span> pyspark.sql <span class="im">import</span> SparkSession</span>
<span id="cb242-5"><a href=""></a><span class="im">from</span> pyspark.sql.functions <span class="im">import</span> col</span>
<span id="cb242-6"><a href=""></a><span class="co">#----------</span></span>
<span id="cb242-7"><a href=""></a><span class="im">import</span> numpy <span class="im">as</span> np <span class="co"># Importanto Numpy</span></span>
<span id="cb242-8"><a href=""></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt <span class="co"># Importanto Numpy</span></span>
<span id="cb242-9"><a href=""></a><span class="im">import</span> seaborn <span class="im">as</span> sns <span class="co"># Importando Seaborn</span></span>
<span id="cb242-10"><a href=""></a><span class="co"># -----------------</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="apache-spark-26" class="slide level2">
<h2>Apache Spark</h2>
Sistema de Recomendação com SPARK + python
<hr>
<ul>
<li>Iniciando Sessão do SPARK</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb243"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb243-1"><a href=""></a><span class="co"># ------------------------------------</span></span>
<span id="cb243-2"><a href=""></a><span class="co"># Iniciando uma sessão do Spark</span></span>
<span id="cb243-3"><a href=""></a><span class="co"># ----</span></span>
<span id="cb243-4"><a href=""></a><span class="co"># obs:</span></span>
<span id="cb243-5"><a href=""></a><span class="co"># appName: Nome do app para a sessão</span></span>
<span id="cb243-6"><a href=""></a><span class="co"># -----------------</span></span>
<span id="cb243-7"><a href=""></a>spark <span class="op">=</span> SparkSession <span class="op">\</span></span>
<span id="cb243-8"><a href=""></a>        .builder <span class="op">\</span></span>
<span id="cb243-9"><a href=""></a>        .appName(<span class="st">"Tutorial com SPARK - EPBEst2"</span>) <span class="op">\</span></span>
<span id="cb243-10"><a href=""></a>        .config(<span class="st">"spark.some.config.option"</span>, <span class="st">"some-value"</span>) <span class="op">\</span></span>
<span id="cb243-11"><a href=""></a>        .getOrCreate()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Lendo os dados <code>parquet</code> com Spark</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb244"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb244-1"><a href=""></a><span class="co"># ------------------------------------</span></span>
<span id="cb244-2"><a href=""></a><span class="co"># Ler dados com extensão PARQUET</span></span>
<span id="cb244-3"><a href=""></a><span class="co"># -----------------</span></span>
<span id="cb244-4"><a href=""></a>dados <span class="op">=</span> spark.read.parquet(<span class="st">"../dados/base_e-commerce_parquet/database_compras_parquet.parquet"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="apache-spark-27" class="slide level2">
<h2>Apache Spark</h2>
Sistema de Recomendação com SPARK + python
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb245"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb245-1"><a href=""></a><span class="co"># ------------------------------------</span></span>
<span id="cb245-2"><a href=""></a><span class="co"># Verificando a quantidade de linhas</span></span>
<span id="cb245-3"><a href=""></a><span class="co"># -----------------</span></span>
<span id="cb245-4"><a href=""></a>dados.count()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>338185</code></pre>
</div>
</div>
<div class="fragment">
<p>Verificando os tipos das variáveis</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb247"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb247-1"><a href=""></a><span class="co"># ------------------------------------</span></span>
<span id="cb247-2"><a href=""></a><span class="co"># Verificando as colunas</span></span>
<span id="cb247-3"><a href=""></a><span class="co"># -----------------</span></span>
<span id="cb247-4"><a href=""></a>dados.printSchema()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>root
 |-- DsOrigem: string (nullable = true)
 |-- DsCanalVenda: string (nullable = true)
 |-- DsUnidadeNegocio: string (nullable = true)
 |-- DsTipo: string (nullable = true)
 |-- NrPedido: integer (nullable = true)
 |-- DhPedido: timestamp (nullable = true)
 |-- NrFilial: integer (nullable = true)
 |-- NrLojista: integer (nullable = true)
 |-- InMarketPlace: boolean (nullable = true)
 |-- InRetira: boolean (nullable = true)
 |-- VrVendaLiquida: double (nullable = true)
 |-- VrDescontoTotal: double (nullable = true)
 |-- VrFreteCliente: double (nullable = true)
 |-- QtItem: integer (nullable = true)
 |-- NrItemLoja: integer (nullable = true)
 |-- NrItemSite: integer (nullable = true)
 |-- DsItemSite: string (nullable = true)
 |-- NrDepartamentoSite: integer (nullable = true)
 |-- DsDepartamentoSite: string (nullable = true)
 |-- NrSetorSite: integer (nullable = true)
 |-- DsSetorSite: string (nullable = true)
 |-- NrFamiliaSite: integer (nullable = true)
 |-- DsFamiliaSite: string (nullable = true)
 |-- NrMarcaSite: integer (nullable = true)
 |-- DsMarcaSite: string (nullable = true)
 |-- DsSingleId: string (nullable = true)</code></pre>
</div>
</div>
</div>
</section>
<section id="apache-spark-28" class="slide level2">
<h2>Apache Spark</h2>
Sistema de Recomendação com SPARK + python
<hr>
<ul>
<li>Mostrando as primeiras linhas do DataFrame da variável <code>DsCanalVenda</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb249"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb249-1"><a href=""></a><span class="co"># ------------------------------------</span></span>
<span id="cb249-2"><a href=""></a><span class="co"># Mostrando as 20 linhas da variável</span></span>
<span id="cb249-3"><a href=""></a><span class="co"># "DsCanalVenda"</span></span>
<span id="cb249-4"><a href=""></a><span class="co"># -----------------</span></span>
<span id="cb249-5"><a href=""></a>dados.select(<span class="st">"DsCanalVenda"</span>).show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+------------+
|DsCanalVenda|
+------------+
|        SITE|
|         APP|
|         APP|
|        MOBI|
|         APP|
|        MOBI|
|         APP|
|         APP|
|        MOBI|
|         APP|
|        SITE|
|         APP|
|        MOBI|
|         APP|
|         APP|
|         APP|
|         APP|
|        SITE|
|         APP|
|        SITE|
+------------+
only showing top 20 rows</code></pre>
</div>
</div>
</section>
<section id="apache-spark-29" class="slide level2">
<h2>Apache Spark</h2>
Sistema de Recomendação com SPARK + python
<hr>
<p>Mostrando as primeiras linhas do DataFrame</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb251"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb251-1"><a href=""></a>dados.show(<span class="dv">2</span>,<span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+--------+------------+----------------+-------+---------+-------------------+--------+---------+-------------+--------+--------------+---------------+--------------+------+----------+----------+--------------------+------------------+------------------+-----------+--------------------+-------------+--------------------+-----------+-----------+--------------------+
|DsOrigem|DsCanalVenda|DsUnidadeNegocio| DsTipo| NrPedido|           DhPedido|NrFilial|NrLojista|InMarketPlace|InRetira|VrVendaLiquida|VrDescontoTotal|VrFreteCliente|QtItem|NrItemLoja|NrItemSite|          DsItemSite|NrDepartamentoSite|DsDepartamentoSite|NrSetorSite|         DsSetorSite|NrFamiliaSite|       DsFamiliaSite|NrMarcaSite|DsMarcaSite|          DsSingleId|
+--------+------------+----------------+-------+---------+-------------------+--------+---------+-------------+--------+--------------+---------------+--------------+------+----------+----------+--------------------+------------------+------------------+-----------+--------------------+-------------+--------------------+-----------+-----------+--------------------+
|    SITE|        SITE|             B2C|Produto|245467291|2020-11-27 19:16:00|    NULL|    10037|        false|   false|          94.9|            0.0|           0.0|     1|   4486013|  13857144|Parafusadeira Phi...|               827|       Ferramentas|        830|Ferramentas Elétr...|         1097|      Parafusadeiras|        415|     Philco|58ef9fda-fc19-11e...|
|    SITE|         APP|             B2C|Produto|245386940|2020-11-27 17:20:00|    NULL|    10037|        false|   false|         999.0|            0.0|          89.9|     1|   4101774|  12117822|Guarda-Roupa Bart...|                93|            Móveis|         94|             Quartos|          298|Guarda-roupas e R...|       2978|    Bartira|5657dbc0-fc19-11e...|
+--------+------------+----------------+-------+---------+-------------------+--------+---------+-------------+--------+--------------+---------------+--------------+------+----------+----------+--------------------+------------------+------------------+-----------+--------------------+-------------+--------------------+-----------+-----------+--------------------+
only showing top 2 rows</code></pre>
</div>
</div>
<div class="fragment">
<p><br></p>
<p>Ordenando os dados pela data, variável <code>DhPedido</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb253"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb253-1"><a href=""></a><span class="co"># Ordenando pela data</span></span>
<span id="cb253-2"><a href=""></a>df_ordenado <span class="op">=</span> dados.orderBy(col(<span class="st">"DhPedido"</span>).desc())</span>
<span id="cb253-3"><a href=""></a>df_ordenado.show(<span class="dv">2</span>,<span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+--------+------------+----------------+-------+---------+-------------------+--------+---------+-------------+--------+--------------+---------------+--------------+------+----------+----------+--------------------+------------------+--------------------+-----------+-----------+-------------+------------------+-----------+-----------+--------------------+
|DsOrigem|DsCanalVenda|DsUnidadeNegocio| DsTipo| NrPedido|           DhPedido|NrFilial|NrLojista|InMarketPlace|InRetira|VrVendaLiquida|VrDescontoTotal|VrFreteCliente|QtItem|NrItemLoja|NrItemSite|          DsItemSite|NrDepartamentoSite|  DsDepartamentoSite|NrSetorSite|DsSetorSite|NrFamiliaSite|     DsFamiliaSite|NrMarcaSite|DsMarcaSite|          DsSingleId|
+--------+------------+----------------+-------+---------+-------------------+--------+---------+-------------+--------+--------------+---------------+--------------+------+----------+----------+--------------------+------------------+--------------------+-----------+-----------+-------------+------------------+-----------+-----------+--------------------+
|    SITE|         APP|             B2C|Produto|284950754|2021-08-30 20:56:00|    NULL|    10037|        false|   false|         199.9|            0.0|          26.9|     1|   1100041|     62809|Panela de Pressão...|               371|Utilidades Domést...|        374|    Panelas|          391|Panelas de Pressão|       1335|      Nigro|4ed72d92-50af-11e...|
|    SITE|        MOBI|             B2C|Produto|284950637|2021-08-30 20:54:00|    NULL|    10037|        false|   false|        256.33|            0.0|         24.95|     1|   4713672|  55009664|Balcão Duplo Bart...|                93|              Móveis|        693|   Cozinhas|          723|  Cozinha Modulada|       2978|    Bartira|286f4d70-fc18-11e...|
+--------+------------+----------------+-------+---------+-------------------+--------+---------+-------------+--------+--------------+---------------+--------------+------+----------+----------+--------------------+------------------+--------------------+-----------+-----------+-------------+------------------+-----------+-----------+--------------------+
only showing top 2 rows</code></pre>
</div>
</div>
</div>
</section>
<section id="apache-spark-30" class="slide level2">
<h2>Apache Spark</h2>
Sistema de Recomendação com SPARK + python
<hr>
<ul>
<li>Dividir a base em treino e predição</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb255"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb255-1"><a href=""></a><span class="co"># Separando o data.frame dados em dois data.frames</span></span>
<span id="cb255-2"><a href=""></a></span>
<span id="cb255-3"><a href=""></a><span class="co"># Separando as 100 linhas mais recentes</span></span>
<span id="cb255-4"><a href=""></a>dados_pred <span class="op">=</span> df_ordenado.limit(<span class="dv">100</span>)</span>
<span id="cb255-5"><a href=""></a></span>
<span id="cb255-6"><a href=""></a><span class="co"># Criar DataFrame com o restante</span></span>
<span id="cb255-7"><a href=""></a>dados_treino <span class="op">=</span> df_ordenado.subtract(dados_pred)  <span class="co"># remove as 100 linhas do df original</span></span>
<span id="cb255-8"><a href=""></a></span>
<span id="cb255-9"><a href=""></a>dados_pred.show(<span class="dv">5</span>, <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+--------+------------+----------------+-------+---------+-------------------+--------+---------+-------------+--------+--------------+---------------+--------------+------+----------+----------+--------------------+------------------+--------------------+-----------+--------------+-------------+------------------+-----------+------------+--------------------+
|DsOrigem|DsCanalVenda|DsUnidadeNegocio| DsTipo| NrPedido|           DhPedido|NrFilial|NrLojista|InMarketPlace|InRetira|VrVendaLiquida|VrDescontoTotal|VrFreteCliente|QtItem|NrItemLoja|NrItemSite|          DsItemSite|NrDepartamentoSite|  DsDepartamentoSite|NrSetorSite|   DsSetorSite|NrFamiliaSite|     DsFamiliaSite|NrMarcaSite| DsMarcaSite|          DsSingleId|
+--------+------------+----------------+-------+---------+-------------------+--------+---------+-------------+--------+--------------+---------------+--------------+------+----------+----------+--------------------+------------------+--------------------+-----------+--------------+-------------+------------------+-----------+------------+--------------------+
|    SITE|         APP|             B2C|Produto|284950754|2021-08-30 20:56:00|    NULL|    10037|        false|   false|         199.9|            0.0|          26.9|     1|   1100041|     62809|Panela de Pressão...|               371|Utilidades Domést...|        374|       Panelas|          391|Panelas de Pressão|       1335|       Nigro|4ed72d92-50af-11e...|
|    SITE|        MOBI|             B2C|Produto|284950637|2021-08-30 20:54:00|    NULL|    10037|        false|   false|        3898.0|            0.0|          49.9|     1|   4053478|  11689367|Refrigerador Bras...|                13|    Eletrodomésticos|         14|Refrigeradores|          143|          2 Portas|         62|    Brastemp|286f4d70-fc18-11e...|
|    SITE|        MOBI|             B2C|Produto|284950637|2021-08-30 20:54:00|    NULL|    10037|        false|   false|        256.33|            0.0|         24.95|     1|   4713672|  55009664|Balcão Duplo Bart...|                93|              Móveis|        693|      Cozinhas|          723|  Cozinha Modulada|       2978|     Bartira|286f4d70-fc18-11e...|
|    SITE|        MOBI|             B2C|Produto|284950637|2021-08-30 20:54:00|    NULL|    10037|        false|   false|        592.67|            0.0|         24.95|     1|   4713664|  55009663|Cozinha Bartira J...|                93|              Móveis|        693|      Cozinhas|          698|  Cozinha Compacta|       2978|     Bartira|286f4d70-fc18-11e...|
|    SITE|         APP|             B2C|Produto|284950249|2021-08-30 20:46:00|    NULL|    10037|        false|   false|         299.0|            0.0|          19.9|     1|   4567153|  15259449|Buffet Viero Móve...|                93|              Móveis|        691|Sala de Jantar|          695|           Buffets|      25140|Viero Móveis|a6e7c83a-fc18-11e...|
+--------+------------+----------------+-------+---------+-------------------+--------+---------+-------------+--------+--------------+---------------+--------------+------+----------+----------+--------------------+------------------+--------------------+-----------+--------------+-------------+------------------+-----------+------------+--------------------+
only showing top 5 rows</code></pre>
</div>
</div>
</section>
<section id="apache-spark-31" class="slide level2">
<h2>Apache Spark</h2>
Sistema de Recomendação com SPARK + python
<hr>
<p>Aplicando o <strong>Market Basket Analysis usando PySpark</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb257"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb257-1"><a href=""></a>qtde_compras <span class="op">=</span> dados_treino.groupBy(<span class="st">"DsSingleId"</span>).count()</span>
<span id="cb257-2"><a href=""></a>qtde_compras.show(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+--------------------+-----+
|          DsSingleId|count|
+--------------------+-----+
|56d879ba-fc19-11e...|    3|
|adaef866-fc16-11e...|    8|
|a7892036-fc18-11e...|    3|
|a8467f34-fc16-11e...|    1|
|aa730264-fc16-11e...|   89|
+--------------------+-----+
only showing top 5 rows</code></pre>
</div>
</div>
</section>
<section id="apache-spark-32" class="slide level2">
<h2>Apache Spark</h2>
Sistema de Recomendação com SPARK + python
<hr>
<p><strong>Implementação do FPGrowth</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb259"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb259-1"><a href=""></a><span class="im">from</span> pyspark.sql <span class="im">import</span> functions <span class="im">as</span> f, SparkSession, Column</span>
<span id="cb259-2"><a href=""></a><span class="im">from</span> pyspark.sql.functions <span class="im">import</span> collect_list, array_repeat, concat, col</span>
<span id="cb259-3"><a href=""></a></span>
<span id="cb259-4"><a href=""></a><span class="co"># Agrupar produtos por DsSingleId</span></span>
<span id="cb259-5"><a href=""></a>dados_compras_agg <span class="op">=</span> dados_treino.groupBy(<span class="st">"DsSingleId"</span>).agg(collect_list(<span class="st">"DsItemSite"</span>).alias(<span class="st">"compras"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb260"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb260-1"><a href=""></a><span class="co"># Visualizando 3 linhas do data.frame</span></span>
<span id="cb260-2"><a href=""></a>dados_compras_agg.show(<span class="dv">3</span>, <span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+------------------------------------+------------------------------------------------------------------------------------------------------------------------------------+
|DsSingleId                          |compras                                                                                                                             |
+------------------------------------+------------------------------------------------------------------------------------------------------------------------------------+
|00adf73e-2e16-11ea-b461-00163e3d6ebc|[Chuteira de Campo Infantil Agility 100]                                                                                            |
|00aed2b0-017f-11ec-8368-00163e457d21|[Bicicleta Infantil Aro 16 Verden Breeze - Branco e Lilas]                                                                          |
|018b82b6-f291-11eb-b71e-00163ee39299|[Smart TV 55\" Neo QLED 4K Samsung 55QN85A, Mini Led, Painel 120hz, Processador IA, Som em Movimento, Tela sem limites, Design slim]|
+------------------------------------+------------------------------------------------------------------------------------------------------------------------------------+
only showing top 3 rows</code></pre>
</div>
</div>
</div>
</section>
<section id="apache-spark-33" class="slide level2">
<h2>Apache Spark</h2>
Sistema de Recomendação com SPARK + python
<hr>
<ul>
<li>Removendo valores nulos</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb262"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb262-1"><a href=""></a><span class="co"># Removendo valores nulos</span></span>
<span id="cb262-2"><a href=""></a>df_aggregated <span class="op">=</span> dados_compras_agg.select(<span class="st">"DsSingleId"</span>, f.array_except(<span class="st">"compras"</span>, f.array(f.lit(<span class="va">None</span>))).alias(<span class="st">"compras"</span>))</span>
<span id="cb262-3"><a href=""></a>df_aggregated.show(<span class="dv">3</span>, <span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+------------------------------------+------------------------------------------------------------------------------------------------------------------------------------+
|DsSingleId                          |compras                                                                                                                             |
+------------------------------------+------------------------------------------------------------------------------------------------------------------------------------+
|00adf73e-2e16-11ea-b461-00163e3d6ebc|[Chuteira de Campo Infantil Agility 100]                                                                                            |
|00aed2b0-017f-11ec-8368-00163e457d21|[Bicicleta Infantil Aro 16 Verden Breeze - Branco e Lilas]                                                                          |
|018b82b6-f291-11eb-b71e-00163ee39299|[Smart TV 55\" Neo QLED 4K Samsung 55QN85A, Mini Led, Painel 120hz, Processador IA, Som em Movimento, Tela sem limites, Design slim]|
+------------------------------------+------------------------------------------------------------------------------------------------------------------------------------+
only showing top 3 rows</code></pre>
</div>
</div>
</section>
<section id="apache-spark-34" class="slide level2">
<h2>Apache Spark</h2>
Sistema de Recomendação com SPARK + python
<hr>
<p><strong>Hiperparâmetros</strong></p>
<p>Os hiperparâmetros usados no FPGrowth são suporte mínimo, confiança mínima e número de partições.</p>
<ul>
<li><strong>minSupport</strong> – O suporte mínimo de um item para que ele seja considerado em um conjunto frequente de itens.</li>
<li><strong>minConfidence</strong> – A confiança mínima para gerar uma regra de associação a partir de um conjunto de itens.</li>
<li><strong>numPartitions</strong> – O número de partições usadas para distribuir o trabalho. Isso é específico do Spark.</li>
</ul>
<p>O número padrão de partições é o número de partições do conjunto de dados de entrada.</p>
</section>
<section id="apache-spark-35" class="slide level2">
<h2>Apache Spark</h2>
Sistema de Recomendação com SPARK + python
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb264"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb264-1"><a href=""></a><span class="co"># Executando o FPGrowth e criando o modelo</span></span>
<span id="cb264-2"><a href=""></a><span class="im">from</span> pyspark.ml.fpm <span class="im">import</span> FPGrowth</span>
<span id="cb264-3"><a href=""></a></span>
<span id="cb264-4"><a href=""></a>fp <span class="op">=</span> FPGrowth(minSupport<span class="op">=</span><span class="fl">0.00005</span>, minConfidence<span class="op">=</span><span class="fl">0.0001</span>, itemsCol<span class="op">=</span><span class="st">'compras'</span>, predictionCol<span class="op">=</span><span class="st">'prediction'</span>)</span>
<span id="cb264-5"><a href=""></a></span>
<span id="cb264-6"><a href=""></a>model <span class="op">=</span> fp.fit(df_aggregated)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="apache-spark-36" class="slide level2">
<h2>Apache Spark</h2>
Sistema de Recomendação com SPARK + python
<hr>
<p>Vendo um subconjunto das regras de itens frequentes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb265"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb265-1"><a href=""></a><span class="co"># Veja um subconjunto do conjunto de itens frequentes</span></span>
<span id="cb265-2"><a href=""></a>model.freqItemsets.show(<span class="dv">10</span>, <span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+--------------------------------------------------------------------------------------------------------------------------------------------------------+----+
|items                                                                                                                                                   |freq|
+--------------------------------------------------------------------------------------------------------------------------------------------------------+----+
|[Conjunto de Potes e Tigelas Organizadoras 5 Peças Inox]                                                                                                |11  |
|[Coifa de Parede Cadence Tradizionale CFA290 Inox - 90cm]                                                                                               |14  |
|[Balcão Buffet com Moldura 3 Portas Lirio Seda/Off White - Viero Móveis]                                                                                |7   |
|[Fogão A Gás 4 Bocas Dako Supreme Glass Preto Automático Bivolt]                                                                                        |6   |
|[Notebook Acer Core i5-1035G1 8GB 256GB SSD Placa de Vídeo 2GB Tela 15.6” Windows 10 Aspire 5 A515-55G-51HJ]                                            |8   |
|[Jogo Mortal Kombat 11: Aftermath - PS4]                                                                                                                |9   |
|[Escrivaninha Com 1 Gaveta Facility Branco]                                                                                                             |82  |
|[Relogio Smartwatch Hw16 44Mm Chamadas Bluetooth Android Ios]                                                                                           |6   |
|[Chapinha| Prancha Philco Ultra Titanium 230ºC com Emissão de Íons Azul – Bivolt]                                                                       |135 |
|[Chapinha| Prancha Philco Ultra Titanium 230ºC com Emissão de Íons Azul – Bivolt, Liquidificador Britânia Diamante 800 com 4 Velocidades e 900W - Preto]|6   |
+--------------------------------------------------------------------------------------------------------------------------------------------------------+----+
only showing top 10 rows</code></pre>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb267"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb267-1"><a href=""></a><span class="co"># Use o filtro para visualizar apenas as regras de associação com a maior confiança.</span></span>
<span id="cb267-2"><a href=""></a>model.associationRules.<span class="bu">filter</span>(model.associationRules.confidence<span class="op">&gt;</span><span class="fl">0.15</span>).show(<span class="dv">20</span>, <span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------+-------------------+------------------+---------------------+
|antecedent                                                                                                                                                                                                                                            |consequent                                                       |confidence         |lift              |support              |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------+-------------------+------------------+---------------------+
|[Colchão Queen Vian Austria com Euro Pillow e Molas Ensacadas 22x158x198cm - Prata / Branco / Cinza]                                                                                                                                                  |[BOX 079 VIERO AUSTRIA PRATA A38]                                |1.0                |18329.0           |5.45583501554913E-5  |
|[Armário de Geladeira Bartira Safira Plus com Porta Basculante, Guarda-Roupa Bartira Olímpia com 6 Portas e 3 Gavetas]                                                                                                                                |[Armário Triplo Bartira Safira Plus com 3 Portas]                |1.0                |369.0402684563758 |6.365140851473985E-5 |
|[Armário de Geladeira Bartira Safira Plus com Porta Basculante, Guarda-Roupa Bartira Olímpia com 6 Portas e 3 Gavetas]                                                                                                                                |[Paneleiro Duplo Bartira Safira Plus com 4 Portas e 2 Gavetas]   |1.0                |345.8301886792453 |6.365140851473985E-5 |
|[Tp Vd160x90 Kanon Mont Ele Mal Tiju Amari 8mm, Armário Aéreo Bartira Rubi com 2 Portas de Vidro, Armário para Micro-ondas Bartira Rubi com Nicho, Armário de Geladeira Bartira Rubi com 1 Porta, Balcão Triplo Bartira Rubi com 2 Portas e 3 Gavetas]|[Armário Basculante Bartira Rubi com Suporte para Utensílios]    |1.0                |220.83132530120483|6.365140851473985E-5 |
|[Base Brigatto New Ibiza]                                                                                                                                                                                                                             |[Tampo de Vidro Quadrado 95x95cm Kanon Ibiza Caravaleas R326 8mm]|0.9629629629629629 |2036.5555555555554|2.364195173404623E-4 |
|[Base Brigatto New Ibiza]                                                                                                                                                                                                                             |[Cadeira Brigatto New Ibiza]                                     |0.9629629629629629 |3530.0296296296297|2.364195173404623E-4 |
|[Armário Aéreo Bartira Rubi com 2 Portas de Vidro, Guarda-Roupa Bartira Havana II com 7 Portas e 4 Gavetas, Balcão Triplo Bartira Rubi com 2 Portas e 3 Gavetas, Armário Basculante Bartira Rubi com Suporte para Utensílios]                         |[Armário de Geladeira Bartira Rubi com 1 Porta]                  |1.0                |263.72661870503595|7.27444668739884E-5  |
|[Armário Aéreo Bartira Rubi com 2 Portas de Vidro, Guarda-Roupa Bartira Havana II com 7 Portas e 4 Gavetas, Balcão Triplo Bartira Rubi com 2 Portas e 3 Gavetas, Armário Basculante Bartira Rubi com Suporte para Utensílios]                         |[Armário para Micro-ondas Bartira Rubi com Nicho]                |0.875              |244.8530534351145 |6.365140851473985E-5 |
|[Armário Aéreo Bartira Rubi com 2 Portas de Vidro, Armário para Micro-ondas Bartira Rubi com Nicho, Balcão Triplo Bartira Rubi com 2 Portas e 3 Gavetas]                                                                                              |[Armário Basculante Bartira Rubi com Suporte para Utensílios]    |1.0                |220.83132530120483|0.002300543764889883 |
|[Armário Aéreo Bartira Rubi com 2 Portas de Vidro, Armário para Micro-ondas Bartira Rubi com Nicho, Balcão Triplo Bartira Rubi com 2 Portas e 3 Gavetas]                                                                                              |[Armário de Geladeira Bartira Rubi com 1 Porta]                  |0.9644268774703557 |254.34503938351295|0.002218706239656646 |
|[Armário Aéreo Bartira Rubi com 2 Portas de Vidro, Armário para Micro-ondas Bartira Rubi com Nicho, Balcão Triplo Bartira Rubi com 2 Portas e 3 Gavetas]                                                                                              |[Balcão Duplo Bartira Rubi com 2 Gavetões]                       |0.3438735177865613 |186.29136081309994|7.910960772546238E-4 |
|[Armário Aéreo Bartira Rubi com 2 Portas de Vidro, Armário para Micro-ondas Bartira Rubi com Nicho, Balcão Triplo Bartira Rubi com 2 Portas e 3 Gavetas]                                                                                              |[Balcão Duplo Bartira Rubi com 2 Portas e 1 Prateleira]          |0.7193675889328063 |259.38272532884076|0.001654936621383236 |
|[Armário Aéreo Bartira Rubi com 2 Portas de Vidro, Armário de Geladeira Bartira Rubi com 1 Porta, Armário Basculante Bartira Rubi com Suporte para Utensílios, Triplo Chip Claro ODA 4G Universal Pré/Controle]                                       |[Balcão Triplo Bartira Rubi com 2 Portas e 3 Gavetas]            |1.0                |239.59477124183005|1.5458199210722535E-4|
|[Armário Aéreo Bartira Rubi com 2 Portas de Vidro, Armário de Geladeira Bartira Rubi com 1 Porta, Armário Basculante Bartira Rubi com Suporte para Utensílios, Triplo Chip Claro ODA 4G Universal Pré/Controle]                                       |[Armário para Micro-ondas Bartira Rubi com Nicho]                |0.8823529411764706 |246.9106421194432 |1.3639587538872823E-4|
|[Armário Aéreo Bartira Rubi com 2 Portas de Vidro, Armário de Geladeira Bartira Rubi com 1 Porta, Armário Basculante Bartira Rubi com Suporte para Utensílios, Triplo Chip Claro ODA 4G Universal Pré/Controle]                                       |[Balcão Duplo Bartira Rubi com 2 Gavetões]                       |0.47058823529411764|254.93827875977976|7.27444668739884E-5  |
|[Armário Aéreo Bartira Rubi com 2 Portas de Vidro, Armário de Geladeira Bartira Rubi com 1 Porta, Armário Basculante Bartira Rubi com Suporte para Utensílios, Triplo Chip Claro ODA 4G Universal Pré/Controle]                                       |[Balcão Duplo Bartira Rubi com 2 Portas e 1 Prateleira]          |0.5294117647058824 |190.89026036644165|8.183752523323694E-5 |
|[Colchão para Cama Queen Size Umaflex Itália com Pillow Top e Molas Ensacadas 26 x 158 x 198 cm - Branco, Chip Tim Plano Naked 4G]                                                                                                                    |[BOX 079 UMAFLEX ITALIA JAQUARD BRANCO A43.]                     |1.0                |621.3220338983051 |5.45583501554913E-5  |
|[Smartphone Motorola Moto G 5G Plus Lilás 128GB, 8GB RAM, Tela de 6.7”, Câmera Traseira Quádrupla, Android 10 e Processador Octa-Core]                                                                                                                |[Triplo Chip Claro ODA 4G Universal Pré/Controle]                |0.2608695652173913 |10.543502229039834|5.45583501554913E-5  |
|[Guarda-Roupa Europa Triunfo Flex com 2 Portas de Correr e Espelho, Armário Aéreo Bartira Rubi com 2 Portas de Vidro]                                                                                                                                 |[Balcão Triplo Bartira Rubi com 2 Portas e 3 Gavetas]            |0.8571428571428571 |205.36694677871145|5.45583501554913E-5  |
|[Guarda-Roupa Europa Triunfo Flex com 2 Portas de Correr e Espelho, Armário Aéreo Bartira Rubi com 2 Portas de Vidro]                                                                                                                                 |[Armário Basculante Bartira Rubi com Suporte para Utensílios]    |1.0                |220.83132530120483|6.365140851473985E-5 |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------+-------------------+------------------+---------------------+
only showing top 20 rows</code></pre>
</div>
</div>
</div>
</section>
<section id="apache-spark-37" class="slide level2">
<h2>Apache Spark</h2>
Sistema de Recomendação com SPARK + python
<hr>
<p>Vamos criar uma recomendação com base nas regras de associação geradas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb269"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb269-1"><a href=""></a><span class="co"># Predict</span></span>
<span id="cb269-2"><a href=""></a>dados_pred_sel <span class="op">=</span> dados_pred.select(<span class="st">"DsSingleId"</span>, <span class="st">"DsItemSite"</span>)</span>
<span id="cb269-3"><a href=""></a>dados_pred_sel_compras <span class="op">=</span> dados_pred_sel.withColumnRenamed(<span class="st">"DsItemSite"</span>,<span class="st">"compras"</span>)</span>
<span id="cb269-4"><a href=""></a>dados_pred_aggregated <span class="op">=</span> dados_pred_sel_compras.groupBy(<span class="st">"DsSingleId"</span>).agg(</span>
<span id="cb269-5"><a href=""></a>    f.collect_list(<span class="st">"compras"</span>).alias(<span class="st">"compras"</span>)</span>
<span id="cb269-6"><a href=""></a>)</span>
<span id="cb269-7"><a href=""></a></span>
<span id="cb269-8"><a href=""></a>dados_pred_aggregated.show(<span class="dv">20</span>, <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+--------------------+--------------------+
|          DsSingleId|             compras|
+--------------------+--------------------+
|4ed72d92-50af-11e...|[Panela de Pressã...|
|286f4d70-fc18-11e...|[Refrigerador Bra...|
|a6e7c83a-fc18-11e...|[Buffet Viero Móv...|
|56051142-fc19-11e...|[Smartphone Motor...|
|a7579e94-fc18-11e...|[Bicicleta Aro 20...|
|a64c6d7e-fc16-11e...|[Balcão Buffet 3 ...|
|a76b1d16-fc18-11e...|[Fogão Consul 4 B...|
|5957d9ec-fc19-11e...|[Escova Secadora ...|
|a6eebb88-fc16-11e...|[Tigela de Vidro ...|
|59b877f2-fc19-11e...|[Bateria Externa ...|
|a7e8cdee-fc16-11e...|[Fralda Pampers C...|
|6f567e9a-c989-11e...|[Kit Notebook Del...|
|c59a2e50-7d7a-11e...|[Cômoda Casa D Be...|
|5ad7fae0-fc19-11e...|[Conjunto de Pane...|
|a86c7e6c-fc18-11e...|[Tigela de Vidro ...|
|5747bf8c-fc19-11e...|[Fogão de Piso 4 ...|
|5610dec8-fc19-11e...|[Smart TV LED 50\...|
|a84ea952-fc16-11e...|[Cama Box Solteir...|
|56a14526-fc19-11e...|[Guarda Roupas Ca...|
|5b22a176-fc19-11e...|[Bicicleta Aro 29...|
+--------------------+--------------------+
only showing top 20 rows</code></pre>
</div>
</div>
</section>
<section id="apache-spark-38" class="slide level2">
<h2>Apache Spark</h2>
Sistema de Recomendação com SPARK + python
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb271"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb271-1"><a href=""></a><span class="co"># Gerando as recomendações</span></span>
<span id="cb271-2"><a href=""></a>model.transform(dados_pred_aggregated).show(<span class="dv">20</span>, <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>+--------------------+--------------------+--------------------+
|          DsSingleId|             compras|          prediction|
+--------------------+--------------------+--------------------+
|4ed72d92-50af-11e...|[Panela de Pressã...|                  []|
|286f4d70-fc18-11e...|[Refrigerador Bra...|[Smart TV LED 50\...|
|a6e7c83a-fc18-11e...|[Buffet Viero Móv...|                  []|
|56051142-fc19-11e...|[Smartphone Motor...|                  []|
|a7579e94-fc18-11e...|[Bicicleta Aro 20...|                  []|
|a64c6d7e-fc16-11e...|[Balcão Buffet 3 ...|                  []|
|a76b1d16-fc18-11e...|[Fogão Consul 4 B...|[Refrigerador Con...|
|5957d9ec-fc19-11e...|[Escova Secadora ...|                  []|
|a6eebb88-fc16-11e...|[Tigela de Vidro ...|                  []|
|59b877f2-fc19-11e...|[Bateria Externa ...|[Smartphone Samsu...|
|a7e8cdee-fc16-11e...|[Fralda Pampers C...|[Fralda Pampers C...|
|6f567e9a-c989-11e...|[Kit Notebook Del...|                  []|
|c59a2e50-7d7a-11e...|[Cômoda Casa D Be...|                  []|
|5ad7fae0-fc19-11e...|[Conjunto de Pane...|[Faqueiro Tramont...|
|a86c7e6c-fc18-11e...|[Tigela de Vidro ...|                  []|
|5747bf8c-fc19-11e...|[Fogão de Piso 4 ...|                  []|
|5610dec8-fc19-11e...|[Smart TV LED 50\...|[Smartphone Motor...|
|a84ea952-fc16-11e...|[Cama Box Solteir...|                  []|
|56a14526-fc19-11e...|[Guarda Roupas Ca...|                  []|
|5b22a176-fc19-11e...|[Bicicleta Aro 29...|                  []|
+--------------------+--------------------+--------------------+
only showing top 20 rows</code></pre>
</div>
</div>
</section>
<section id="section" class="slide level2" data-background-image="images/ppgest_ufpe.png" data-background-opacity="1" data-background-size="contain">
<h2></h2>
</section>
<section class="slide level2">

<!-- ----

## Referências

<hr/>
<br/>


- Treveil, Mark, et al. Introducing MLOps. O'Reilly Media, 2020.


- Sculley, David, et al. "Hidden technical debt in machine learning systems." Advances in neural information processing systems 28 (2015).


- Kuhn, Max, and Julia Silge. Tidy modeling with R: A framework for modeling in the tidyverse. " O'Reilly Media, Inc.", 2022.


- Wisniewski, Jakub, and Przemyslaw Biecek. "fairmodels: a Flexible Tool for Bias Detection, Visualization, and Mitigation in Binary Classification Models." R J. 14.1 (2022): 227-243.

- vetiver - <https://github.com/rstudio/vetiver-r>



------- -->
<p><br></p>
<div class="columns">
<div class="column" style="width:60%;">
<h3 style="font-size:30pt">
Contato:
</h3>
<p>
</p><p><strong>e-mail</strong>: <a href="mailto:jodavid.ferreira@ufpe.br" class="email">jodavid.ferreira@ufpe.br</a></p>
<p><strong>Site Pessoal</strong>: <a href="https://jodavid.github.io/" class="uri">https://jodavid.github.io/</a></p>
<p><strong>Lattes</strong>: <a href="http://lattes.cnpq.br/4617170601890026">http://lattes.cnpq.br/4617170601890026</a></p>
<p><strong>LinkedIn</strong>: <a href="https://www.linkedin.com/in/jodavidferreira/">jodavidferreira</a></p>
</div><div class="column" style="width:40%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/castlab.png" class="relative quarto-figure quarto-figure-center" width="200"></p>
</figure>
</div>
<div style="text-align:center; margin-top:-30px">
<p>Computational Agriculture Statistics Laboratory - UFPE</p>
</div>
</div></div>
<p><br> <br></p>
<hr>
<h1 style="text-align: center;">
<p>OBRIGADO!</p>
</h1>
<hr>
<div style="text-align: center">
<p>Slide produzido com <a href="https://quarto.org/">quarto</a></p>
</div>

</section>

    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="images/logo.png" class="slide-logo"></p>
<div class="footer footer-default">
<p>Explorando R e Python com Spark no contexto da Estatística - <a href="https://jodavid.github.io/">Jodavid Ferreira</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="index_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="index_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="index_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="index_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="index_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="index_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="index_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': true,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'concave',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'convex',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>